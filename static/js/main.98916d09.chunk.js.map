{"version":3,"sources":["hooks/use-search.ts","models/product.tsx","models/category.tsx","components/product-rows.tsx","components/category-rows.tsx","components/products-list.tsx","index.tsx"],"names":["useSearch","useState","query","setQuery","filtered","setFiltered","fuse","setFuse","items","Fuse","undefined","search","map","r","item","getXMLTagContent","xml","tagName","elems","getElementsByTagName","length","textContent","Product","id","name","price","count","this","Category","names","products","getAttribute","split","Array","from","e","ProductRows","index","Table","Row","Cell","CategoryHeader","HeaderCell","width","Breadcrumb","icon","sections","key","content","CategoryRows","categories","a","fetch","response","DOMParser","text","document","parseFromString","ProductsList","setCategories","filteredProducts","setProducts","useEffect","load","then","c","flat","Segment","basic","Input","fluid","iconPosition","value","onChange","target","action","Button","onClick","unstackable","Header","Body","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.98916d09.chunk.js","sourcesContent":["import { useState } from 'react'\nimport Fuse from 'fuse.js'\n\ntype setter<T> = (items: T[]) => void\n\ntype runQuery = (query: string) => void\n\nfunction useSearch<T>(): [T[] | undefined, setter<T>, string, runQuery] {\n  const [query, setQuery] = useState<string>('')\n\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const [fuse, setFuse] = useState<Fuse<T>>()\n\n  const setter: setter<T> = items => {\n    setFuse(new Fuse(items))\n\n    setFiltered(undefined)\n  }\n\n  const runQuery: runQuery = (query: string) => {\n    setQuery(query)\n\n    setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n  }\n\n  return [filtered, setter, query, runQuery]\n}\n\nexport default useSearch\n","function getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nexport class Product {\n  id: string\n  name: string\n  price: string\n  count: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n  }\n}\n","import { Product } from './product'\n\nexport class Category {\n  names: string[] | undefined\n  products: Product[]\n\n  constructor(xml: Element) {\n    this.names = xml.getAttribute('name')?.split('/')\n    this.products = Array.from(xml.getElementsByTagName('product')).map(e => new Product(e))\n  }\n}\n","import { Table } from \"semantic-ui-react\"\nimport { Product } from \"../models/product\"\n\ninterface ProductRowsParams {\n  products: Product[]\n}\n\nconst ProductRows = ({ products }: ProductRowsParams) => <>\n  {products.map(({ name, price, count }, index) => (\n    <Table.Row key={index}>\n      <Table.Cell>{name}</Table.Cell>\n\n      <Table.Cell>{price} грн</Table.Cell>\n\n      <Table.Cell>{count}</Table.Cell>\n    </Table.Row>\n  ))}\n</>\n\nexport default ProductRows\n","import { Breadcrumb, Table } from \"semantic-ui-react\"\nimport { Category } from \"../models/category\"\nimport ProductRows from \"./product-rows\"\n\ninterface CategoryRowsParams {\n  categories: Category[]\n}\n\ninterface CategoryNameParams {\n  names: string[]\n}\n\nconst CategoryRows = ({ categories }: CategoryRowsParams) => <>\n  {categories.map(({ names, products }) => (\n    <>\n      {names && <CategoryHeader names={names} />}\n\n      <ProductRows products={products} />\n    </>\n  ))}\n</>\n\nconst CategoryHeader = ({ names }: CategoryNameParams) => <Table.Row>\n  <Table.HeaderCell width={3}>\n    <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n  </Table.HeaderCell>\n</Table.Row>\n\nexport default CategoryRows\n","import { useEffect, useState } from 'react'\nimport { Button, Input, Table, Segment } from 'semantic-ui-react'\nimport useSearch from '../hooks/use-search'\n\nimport { Category } from '../models/category'\nimport { Product } from '../models/product'\nimport ProductRows from './product-rows'\nimport CategoryRows from './category-rows'\n\nasync function load(): Promise<Category[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('category')).map(e => new Category(e))\n}\n\nconst ProductsList = () => {\n  const [categories, setCategories] = useState<Category[]>()\n\n  const [filteredProducts, setProducts, query, setQuery] = useSearch<Product>()\n\n  useEffect(() => {\n    load().then(categories => {\n      setCategories(categories)\n\n      setProducts(categories.map(c => c.products).flat())\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <Segment basic>\n      <Input fluid icon='search' iconPosition='left' value={query} onChange={e => setQuery(e.target.value)}\n        action={<Button basic icon='delete' onClick={() => setQuery('')} />} />\n\n      <Table unstackable>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Назва</Table.HeaderCell>\n\n            <Table.HeaderCell>Ціна</Table.HeaderCell>\n\n            <Table.HeaderCell>Наявність</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {\n            filteredProducts === undefined\n              ? categories && <CategoryRows categories={categories} />\n              : <ProductRows products={filteredProducts} />\n          }\n        </Table.Body>\n      </Table >\n    </Segment>\n  )\n}\n\nexport default ProductsList\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsList from './components/products-list'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ProductsList />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}