{"version":3,"sources":["helpers.ts","models/category.ts","store.ts","firebase-config.ts","models/product.ts","components/products-page/products-search-input.tsx","hooks/use-window-size.ts","components/products-page/category-row.tsx","components/products-page/order-actions.tsx","components/products-page/product-row.tsx","components/products-page/products-table.tsx","components/products-page/menu.tsx","components/products-page/index.tsx","hooks/use-search.ts","components/sign-in-page/index.tsx","components/order-page/index.tsx","components/order-history-page/index.tsx","index.tsx"],"names":["groupBy","arr","getKey","Object","entries","reduce","result","item","key","push","Category","name","products","names","this","split","type","value","UPDATE_ORDER","RESET_ORDER","SET_DATA","initialState","order","store","createStore","state","action","product","amount","id","fuse","Fuse","keys","categories","p","category","sort","a","b","localeCompare","map","serializedOrder","localStorage","getItem","JSON","parse","undefined","loadState","devToolsEnhancer","subscribe","setItem","stringify","getState","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","getXMLTagContent","xml","tagName","elems","getElementsByTagName","length","textContent","Product","price","count","ProductsSearchInput","onSearch","useState","query","setQuery","useEffect","timeout","setTimeout","clearTimeout","Input","fluid","icon","iconPosition","onChange","e","target","Button","basic","onClick","memo","useWindowSize","width","document","documentElement","clientWidth","height","clientHeight","windowSize","setWindowSize","handleResize","window","addEventListener","removeEventListener","CategoryRow","style","className","Breadcrumb","sections","content","connect","props","dispatch","setOrderAmount","setValue","size","compact","onBlur","parseInt","ProductRow","isLoggedIn","Label","color","Icon","MemoisedList","windowWidth","items","itemCount","itemSize","itemKey","index","overscanCount","areEqual","ProductsTable","filteredProducts","maxHeight","setMaxHeight","useMemo","toItem","flatMap","c","present","concat","Segment","attached","MenuComponent","hasOrder","Menu","secondary","Item","signOut","as","to","fetch","response","DOMParser","text","parseFromString","Array","from","setData","useAuthState","user","isFirebaseLoading","isDataLoading","setIsDataLoading","filtered","setFiltered","useCallback","search","r","useSearch","runQuery","load","then","loading","values","filter","x","SignInPage","email","setEmail","password","setPassword","isLoading","setIsLoading","error","setError","handleSignIn","signInWithEmailAndPassword","message","Grid","verticalAlign","textAlign","Column","Message","Form","onSubmit","stacked","placeholder","resetOrder","history","useHistory","handleConfirmOrder","collection","add","uid","date","Date","Group","negative","positive","where","orderBy","get","docs","toDate","OrderHistoryPage","records","setRecords","info","Table","unstackable","Header","Row","HeaderCell","colSpan","toString","Body","Cell","ReactDOM","render","StrictMode","exact","path","component","OrderPage","ProductsPage","getElementById"],"mappings":"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","file":"static/js/main.55e0d2f2.chunk.js","sourcesContent":["export function groupBy<T>(arr: T[], getKey: (item: T) => string): [string, T[]][] {\n  return Object.entries(arr.reduce((result: { [key: string]: T[] }, item) => {\n    const key = getKey(item)\n\n    result[key] = result[key] || []\n\n    result[key].push(item)\n\n    return result\n  }, {}))\n}\n","import Product from './product'\nimport ListItem from './list-item'\n\nclass Category {\n  readonly key: string\n  readonly names: string[]\n  readonly products: Product[]\n\n  constructor(name: string, products: Product[]) {\n    this.key = name\n    this.names = name.split('/')\n    this.products = products\n  }\n\n  present() {\n    return this.key !== ''\n  }\n\n  toItem(): ListItem {\n    return { type: 'category', value: this }\n  }\n}\n\nexport default Category\n","import { Action, createStore } from 'redux'\nimport { devToolsEnhancer } from 'redux-devtools-extension'\nimport Fuse from 'fuse.js'\n\nimport { groupBy } from './helpers'\nimport Order from './models/order'\nimport Product from './models/product'\nimport Category from './models/category'\n\nexport const UPDATE_ORDER = 'UPDATE_ORDER'\n\nexport interface UpdateOrderAction extends Action<typeof UPDATE_ORDER> {\n  product: Product\n  amount: number\n}\n\nexport const RESET_ORDER = 'RESET_ORDER'\n\nexport interface ResetOrderAction extends Action<typeof RESET_ORDER> { }\n\nexport const SET_DATA = 'SET_DATA'\n\nexport interface SetDataAction extends Action<typeof SET_DATA> {\n  products: Product[]\n}\n\ntype AppAction = UpdateOrderAction | ResetOrderAction | SetDataAction\n\nexport interface AppState {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\nconst initialState: AppState = {\n  order: {},\n}\n\nconst reducer = (state = initialState, action: AppAction) => {\n  switch (action.type) {\n    case UPDATE_ORDER:\n      const { product, amount } = action as UpdateOrderAction\n\n      return { ...state, order: { ...state.order, [product.id]: { product, amount } } }\n\n    case RESET_ORDER:\n      return { ...state, order: {} }\n\n    case SET_DATA:\n      const fuse = new Fuse(action.products, { keys: ['name'] })\n\n      const categories = groupBy(action.products, p => p.category)\n        .sort(([a], [b]) => a.localeCompare(b))\n        .map(([name, products]) => new Category(name, products))\n\n      return { ...state, fuse, categories }\n\n    default:\n      return state\n  }\n}\n\nconst loadState = (): AppState | undefined => {\n  try {\n    const serializedOrder = localStorage.getItem('order')\n\n    return serializedOrder ? { order: JSON.parse(serializedOrder) as Order } : undefined\n  } catch {\n    return undefined\n  }\n}\n\nconst store = createStore(reducer, loadState(), devToolsEnhancer({}))\n\nstore.subscribe(() => {\n  try {\n    localStorage.setItem('order', JSON.stringify(store.getState().order))\n  } catch {\n  }\n})\n\nexport default store\n","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAP3J-XdlTdcxSNxWqq-s_oFjDrKRQiZWo',\n  authDomain: 'kivi-pu.firebaseapp.com',\n  projectId: 'kivi-pu',\n  storageBucket: 'kivi-pu.appspot.com',\n  messagingSenderId: '548489968120',\n  appId: '1:548489968120:web:26993108b29017326bbe0d'\n})\n\nexport const auth = firebase.auth()\n\nexport const firestore = firebase.firestore()\n","import ListItem from './list-item'\n\nfunction getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nclass Product {\n  readonly id: string\n  readonly name: string\n  readonly price: string\n  readonly count: string\n  readonly category: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n    this.category = getXMLTagContent(xml, 'category')\n  }\n\n  toItem(): ListItem {\n    return { type: 'product', value: this }\n  }\n\n  get key() {\n    return this.id\n  }\n}\n\nexport default Product\n","import { useState, useEffect, memo } from 'react'\nimport { Input, Button } from 'semantic-ui-react'\n\ninterface ProductsSearchInputProps {\n  onSearch: (query: string) => void\n}\n\nconst ProductsSearchInput = ({ onSearch }: ProductsSearchInputProps) => {\n  const [query, setQuery] = useState<string>('')\n\n  useEffect(() => {\n    if (query === '') {\n      onSearch(query)\n    } else {\n      const timeout = setTimeout(() => onSearch(query), 500)\n\n      return () => clearTimeout(timeout)\n    }\n  }, [query])\n\n  return (\n    <Input\n      fluid\n      icon='search'\n      iconPosition='left'\n      value={query}\n      onChange={e => setQuery(e.target.value)}\n      action={<Button basic icon='delete' onClick={() => setQuery('')} />}\n    />\n  )\n}\n\nexport default memo(ProductsSearchInput)\n","import { useState, useEffect } from 'react'\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: document.documentElement.clientWidth,\n    height: document.documentElement.clientHeight,\n  })\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight,\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n","import { CSSProperties } from 'react'\nimport { Breadcrumb, List } from 'semantic-ui-react'\nimport Category from '../../models/category'\n\ninterface CategoryRowProps {\n  style?: CSSProperties\n  category: Category\n}\n\nconst CategoryRow = ({ style, category: { names } }: CategoryRowProps) => <>\n  <div className='list-item category' style={style}>\n    <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n  </div>\n</>\n\nexport default CategoryRow\n","import { useState } from 'react'\nimport { Button, Input } from 'semantic-ui-react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\n\nimport { AppState, UpdateOrderAction, UPDATE_ORDER } from '../../store'\nimport Product from '../../models/product'\n\ninterface OwnProps {\n  product: Product\n}\n\ninterface StateProps {\n  amount: number\n}\n\ninterface DispatchProps {\n  setOrderAmount: (amount: number) => UpdateOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, OwnProps, AppState> = (state, props) => ({\n  amount: state.order[props.product.id]?.amount || 0,\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, OwnProps> = (dispatch, props) => ({\n  setOrderAmount: amount => dispatch({ type: UPDATE_ORDER, product: props.product, amount })\n})\n\nconst OrderActions = ({ amount, setOrderAmount }: OwnProps & StateProps & DispatchProps) => {\n  const [value, setValue] = useState<string>()\n\n  if (amount === 0 && value === undefined)\n    return <Button size='mini' compact basic icon='add' onClick={() => setOrderAmount(1)} />\n\n  return <>\n    <Button size='mini' compact basic icon='plus' onClick={() => setOrderAmount(amount + 1)} />\n\n    <Input size='mini' type='number' value={value === undefined ? amount : value}\n      onChange={e => setValue(e.target.value)}\n      onBlur={() => {\n        if (value === undefined)\n          return\n\n        setOrderAmount(parseInt(value) || 0)\n\n        setValue(undefined)\n      }}\n    />\n\n    <Button size='mini' compact basic icon='minus' onClick={() => setOrderAmount(amount - 1)} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderActions)\n","import { CSSProperties } from 'react'\nimport { Label, Icon } from 'semantic-ui-react'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Product from '../../models/product'\nimport OrderActions from './order-actions'\n\ninterface ProductRowProps {\n  style?: CSSProperties\n  product: Product\n  isLoggedIn: boolean\n}\n\nconst ProductRow = ({ style, product, isLoggedIn }: ProductRowProps) => {\n  const { width } = useWindowSize()\n\n  return (\n    <div className='list-item product' style={style}>\n      <div className=\"product-row-name\">{product.name}</div>\n\n      <div>{product.price} грн</div>\n\n      <div className='product-row-actions'>\n        {\n          product.count === 'Очікується'\n            ? <Label color='yellow'>{width > 600 ? 'Очікується' : <Icon name='clock' />}</Label>\n            : isLoggedIn\n              ? <OrderActions product={product} />\n              : <Label color='green'>{width > 600 ? 'В наявності' : <Icon name='check' />}</Label>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default ProductRow\n","import { memo, useEffect, useMemo, useState } from 'react'\nimport { FixedSizeList, areEqual } from 'react-window'\nimport { Segment } from 'semantic-ui-react'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport ListItem from '../../models/list-item'\nimport CategoryRow from './category-row'\nimport ProductRow from './product-row'\n\ninterface ProductsTableProps {\n  isLoggedIn: boolean\n  categories?: Category[]\n  filteredProducts?: Product[]\n}\n\ninterface MemoisedListProps {\n  height: number\n  windowWidth: number\n  isLoggedIn: boolean\n  items: ListItem[]\n}\n\nconst MemoisedList = memo(({ height, windowWidth, isLoggedIn, items }: MemoisedListProps) => (\n  <FixedSizeList\n    width='100%'\n    height={height}\n    itemCount={items.length}\n    itemSize={\n      (isLoggedIn && windowWidth <= 600)\n        || windowWidth <= 340\n        ? 84\n        : windowWidth <= 425\n          ? 71\n          : windowWidth <= 1024 ? 52 : 35\n    }\n    itemKey={index => items[index].value.key}\n    overscanCount={5}\n    className='products-border'\n  >\n    {memo(({ index, style }) => {\n      const item = items[index]\n\n      return item.type === 'category'\n        ? <CategoryRow style={style} category={item.value} />\n        : <ProductRow style={style} isLoggedIn={isLoggedIn} product={item.value} />\n    }, areEqual)}\n  </FixedSizeList>\n))\n\nconst ProductsTable = ({ isLoggedIn, categories, filteredProducts }: ProductsTableProps) => {\n  const windowSize = useWindowSize()\n\n  const [maxHeight, setMaxHeight] = useState<number>(windowSize.height)\n\n  useEffect(() => { if (windowSize.height > maxHeight) setMaxHeight(windowSize.height) }, [windowSize.height])\n\n  const items = useMemo(() => {\n    if (filteredProducts !== undefined) {\n      return filteredProducts.map(p => p.toItem())\n    }\n    else if (categories !== undefined) {\n      return categories.flatMap(c => {\n        const items = c.products.map(p => p.toItem())\n\n        return c.present() ? ([c.toItem()]).concat(items) : items\n      })\n    }\n    else {\n      return []\n    }\n  }, [categories, filteredProducts])\n\n  return (\n    <Segment basic attached className='products'>\n      <MemoisedList\n        height={maxHeight - (isLoggedIn ? 155 : 115) - (windowSize.width > 425 ? 14 : 0)}\n        windowWidth={windowSize.width}\n        items={items}\n        isLoggedIn={isLoggedIn}\n      />\n    </Segment>\n  )\n}\n\nexport default ProductsTable\n","import { memo } from 'react'\nimport { Menu, Icon } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport { auth } from '../../firebase-config'\n\ninterface MenuProps {\n  isLoggedIn: boolean\n  hasOrder: boolean\n}\n\nconst MenuComponent = ({ isLoggedIn, hasOrder }: MenuProps) => {\n  const { width } = useWindowSize()\n\n  if (!isLoggedIn)\n    return null\n\n  return (\n    <Menu secondary attached>\n      <Menu.Item onClick={() => auth.signOut()}>\n        <Icon name='sign out' />\n\n        Вийти\n      </Menu.Item>\n\n      <Menu.Menu className='right'>\n        {\n          hasOrder && <Menu.Item as={(props: any) => <Link to='/order' {...props} />}>\n            <Icon name='shop' />\n\n            {width > 600 ? 'Перейти до замовлення' : 'Замовлення'}\n          </Menu.Item>\n        }\n\n        <Menu.Item as={(props: any) => <Link to='/orders' {...props} />}>\n          <Icon name='history' />\n\n          {width > 600 ? 'Історія замовлень' : 'Історія'}\n        </Menu.Item>\n      </Menu.Menu>\n    </Menu>\n  )\n}\n\nexport default memo(MenuComponent)\n","import { useEffect, useState } from 'react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Segment } from 'semantic-ui-react'\nimport Fuse from 'fuse.js'\n\nimport { AppState, SetDataAction, SET_DATA } from '../../store'\nimport { auth } from '../../firebase-config'\nimport useSearch from '../../hooks/use-search'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport Order from '../../models/order'\nimport ProductsSearchInput from './products-search-input'\nimport ProductsTable from './products-table'\nimport Menu from './menu'\n\nasync function load(): Promise<Product[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('product')).map(e => new Product(e))\n}\n\ninterface StateProps {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\ninterface DispatchProps {\n  setData: (products: Product[]) => SetDataAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => state\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  setData: products => dispatch({ type: SET_DATA, products })\n})\n\nconst ProductsPage = ({ order, fuse, categories, setData }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isDataLoading, setIsDataLoading] = useState(false)\n\n  const [filteredProducts, runQuery] = useSearch<Product>(fuse)\n\n  useEffect(() => {\n    if (!categories || !fuse) {\n      setIsDataLoading(true)\n\n      load().then(products => { setData(products); setIsDataLoading(false) })\n    }\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  if (isDataLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    <Menu isLoggedIn={!!user} hasOrder={Object.values(order).filter(x => x && x.amount > 0).length > 0} />\n\n    <Segment basic attached>\n      <ProductsSearchInput onSearch={runQuery} />\n    </Segment>\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>{user ? 'Замовлення' : 'Наявність'}</div>\n      </div>\n    </Segment>\n\n    <ProductsTable isLoggedIn={!!user} categories={categories} filteredProducts={filteredProducts} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(ProductsPage)\n","import { useState, useCallback } from 'react'\nimport Fuse from 'fuse.js'\n\ntype runQuery = (query: string) => void\n\nexport default function useSearch<T>(fuse?: Fuse<T>): [T[] | undefined, runQuery] {\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const runQuery: runQuery = query => setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n\n  return [filtered, useCallback(runQuery, [fuse])]\n}\n","import { Redirect } from 'react-router-dom'\nimport { Grid, Form, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useState } from 'react'\nimport { auth } from '../../firebase-config'\n\nconst SignInPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  if (user)\n    return <Redirect to='/' />\n\n  const handleSignIn = async () => {\n    setIsLoading(true)\n\n    try {\n      await auth.signInWithEmailAndPassword(email, password)\n\n      setError(undefined)\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Grid className='sign-in-page' verticalAlign='middle' textAlign='center'>\n      <Grid.Column>\n        {error && <Message error content={error} />}\n\n        <Form onSubmit={handleSignIn} loading={isLoading || isFirebaseLoading}>\n          <Segment stacked>\n            <Form.Input type='email' placeholder='Адрес e-mail' icon='user' iconPosition='left' value={email} onChange={e => setEmail(e.target.value)} />\n\n            <Form.Input type='password' placeholder='Пароль' icon='lock' iconPosition='left' value={password} onChange={e => setPassword(e.target.value)} />\n\n            <Form.Button icon='sign in' content='Увійти' fluid />\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  )\n}\n\nexport default SignInPage\n","import { Table, Button, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { Redirect, Link, useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { auth, firestore } from '../../firebase-config'\nimport { AppState, ResetOrderAction, RESET_ORDER } from '../../store'\nimport ProductRow from '../products-page/product-row'\nimport { OrderItem } from '../../models/order'\n\ninterface StateProps {\n  items: OrderItem[]\n}\n\ninterface DispatchProps {\n  resetOrder: () => ResetOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  items: Object.values(state.order).filter(x => x && x.amount > 0).map(x => x!),\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  resetOrder: () => dispatch({ type: RESET_ORDER })\n})\n\nconst OrderPage = ({ items, resetOrder }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  const history = useHistory()\n\n  if (!isFirebaseLoading && !user || items.length === 0)\n    return <Redirect to='/' />\n\n  const handleConfirmOrder = async () => {\n    setIsLoading(true)\n\n    try {\n      const products = items.map(({ product: { id, name }, amount }) => JSON.stringify({ id, name, amount }))\n\n      await firestore.collection('orders').add({ uid: user.uid, date: new Date(), products })\n\n      setError(undefined)\n\n      resetOrder()\n\n      history.push('/')\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  if (isLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    {error && <Segment basic attached><Message error content={error} /></Segment>}\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>Замовлення</div>\n      </div>\n    </Segment>\n\n    <Segment basic attached className='order-products'>\n      <div>{items.map(({ product }) => <ProductRow key={product.id} product={product} isLoggedIn />)}</div>\n    </Segment>\n\n    <Segment basic attached className='order-buttons'>\n      <Button.Group fluid>\n        <Button basic negative icon='arrow left' content='Назад' as={(props: any) => <Link to='/' {...props} />} />\n\n        <Button basic positive icon='shop' content='Підтвердити замовлення' onClick={handleConfirmOrder} />\n      </Button.Group>\n    </Segment>\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderPage)\n","import { useEffect, useState, Fragment } from 'react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Redirect, Link } from 'react-router-dom'\nimport { Segment, Table, Menu, Icon, Message } from 'semantic-ui-react'\n\nimport { auth, firestore } from '../../firebase-config'\n\ninterface OrderRecord {\n  date: Date\n  products: { name: string, amount: number }[]\n}\n\nasync function load(uid: string): Promise<OrderRecord[]> {\n  const response = await firestore.collection('orders').where('uid', '==', uid).orderBy('date', 'desc').get()\n\n  return response.docs.map(x => ({\n    date: x.get('date').toDate(),\n    products: x.get('products').map((p: string) => JSON.parse(p))\n  }))\n}\n\nconst OrderHistoryPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [records, setRecords] = useState<OrderRecord[]>([])\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [error, setError] = useState<string>()\n\n  useEffect(() => {\n    if (!user) return\n\n    load(user.uid).then(records => {\n      setRecords(records)\n\n      setError(undefined)\n\n      setIsLoading(false)\n    }).catch(e => {\n      setError(e.message)\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [user])\n\n  if (!isFirebaseLoading && !user)\n    return <Redirect to='/' />\n\n  return (\n    <>\n      <Menu secondary attached>\n        <Menu.Item as={(props: any) => <Link to='/' {...props} />}>\n          <Icon name='arrow left' />\n\n          Назад\n        </Menu.Item>\n      </Menu>\n\n      <Segment basic attached loading={isLoading || isFirebaseLoading}>\n        {error && <Message error content={error} />}\n\n        {records.length === 0\n          ? <Message info content='У вас ще немає замовлень' />\n          : <Table unstackable compact='very'>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Назва</Table.HeaderCell>\n\n                <Table.HeaderCell>Кількість</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            {records.map(({ date, products }, index) => <Fragment key={index}>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell colSpan={2}>{date.toString()}</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {products.map(({ name, amount }, index) => <Table.Row key={index}>\n                  <Table.Cell>{name}</Table.Cell>\n\n                  <Table.Cell>{amount}</Table.Cell>\n                </Table.Row>\n                )}\n              </Table.Body>\n            </Fragment>\n            )}\n          </Table>\n        }\n      </Segment>\n    </>\n  )\n}\n\nexport default OrderHistoryPage\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsPage from './components/products-page'\nimport SignInPage from './components/sign-in-page'\nimport OrderPage from './components/order-page'\nimport OrderHistoryPage from './components/order-history-page'\nimport store from './store'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <Route exact path='/signin' component={SignInPage} />\n\n        <Route exact path='/order' component={OrderPage} />\n\n        <Route exact path='/orders' component={OrderHistoryPage} />\n\n        <Route exact path='/' component={ProductsPage} />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}