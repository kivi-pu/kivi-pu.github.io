(this.webpackJsonppricing=this.webpackJsonppricing||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(23),a=n.n(o),i=n(48),s=(n(114),n(135)),u=n(86),d=n(83),j=n.n(d),l=n(26),b=n(93),O=n(137),h=n(134),m=n(121),p=n(96);var v=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(),a=Object(l.a)(o,2),i=a[0],s=a[1],u=Object(c.useState)(),d=Object(l.a)(u,2),j=d[0],b=d[1];return[i,function(e,t){b(new p.a(e,t)),s(void 0)},n,function(e){var t;r(e),s(""===e||null===j||void 0===j||null===(t=j.search(e))||void 0===t?void 0:t.map((function(e){return e.item})))}]},f=n(13);function x(e,t){var n=e.getElementsByTagName(t);return n.length>=1&&n[0].textContent||""}var g=function e(t){Object(f.a)(this,e),this.id=void 0,this.name=void 0,this.price=void 0,this.count=void 0,this.id=x(t,"code"),this.name=x(t,"name"),this.price=x(t,"price"),this.count=x(t,"count")},w=function e(t){var n;Object(f.a)(this,e),this.names=void 0,this.products=void 0,this.names=null===(n=t.getAttribute("name"))||void 0===n?void 0:n.split("/"),this.products=Array.from(t.getElementsByTagName("product")).map((function(e){return new g(e)}))},C=n(136),y=n(3),R=function(e){var t=e.products,n=e.ProductRow;return Object(y.jsx)(s.a.Body,{children:t.map((function(e,t){return Object(y.jsx)(s.a.Row,{children:Object(y.jsx)(n,{product:e})},t)}))})},P=function(e){var t=e.names;return Object(y.jsx)(s.a.Header,{children:Object(y.jsx)(s.a.Row,{children:Object(y.jsx)(s.a.HeaderCell,{colSpan:3,children:Object(y.jsx)(C.a,{icon:"right angle",sections:t.map((function(e){return{key:e,content:e}}))})})})})},k=function(e){var t=e.categories,n=e.ProductRow;return Object(y.jsx)(y.Fragment,{children:t.map((function(e,t){var r=e.names,o=e.products;return Object(y.jsxs)(c.Fragment,{children:[r&&Object(y.jsx)(P,{names:r}),Object(y.jsx)(R,{products:o,ProductRow:n})]},t)}))})};function S(){return(S=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/kivi-pu/products/master/products.xml");case 2:return t=e.sent,e.t0=new DOMParser,e.next=6,t.text();case 6:return e.t1=e.sent,n=e.t0.parseFromString.call(e.t0,e.t1,"text/xml"),e.abrupt("return",Array.from(n.getElementsByTagName("category")).map((function(e){return new w(e)})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){var t=e.header,n=e.ProductRow,r=Object(c.useState)(),o=Object(l.a)(r,2),a=o[0],i=o[1],u=v(),d=Object(l.a)(u,4),j=d[0],b=d[1],p=d[2],f=d[3];return Object(c.useEffect)((function(){(function(){return S.apply(this,arguments)})().then((function(e){i(e),b(e.map((function(e){return e.products})).flat(),{keys:["name"]})}))}),[]),Object(y.jsxs)(O.a,{basic:!0,children:[Object(y.jsx)(h.a,{fluid:!0,icon:"search",iconPosition:"left",value:p,onChange:function(e){return f(e.target.value)},action:Object(y.jsx)(m.a,{basic:!0,icon:"delete",onClick:function(){return f("")}})}),Object(y.jsxs)(s.a,{unstackable:!0,compact:"very",children:[Object(y.jsx)(s.a.Header,{children:Object(y.jsx)(s.a.Row,{children:t})}),void 0===j?a&&Object(y.jsx)(k,{categories:a,ProductRow:n}):Object(y.jsx)(R,{products:j,ProductRow:n})]})]})},A=(s.a.HeaderCell,s.a.Row,s.a.Cell,n(36)),H=n(18),B=n(54),F=n(95),T="PRODUCTS_PAGE/UPDATE_ORDER",z={order:{},user:void 0},D=Object(B.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:var n=t.product,c=t.amount;return Object(H.a)(Object(H.a)({},e),{},{order:Object(H.a)(Object(H.a)({},e.order),{},Object(A.a)({},n.id,{product:n,amount:c}))});default:return e}}),Object(F.devToolsEnhancer)({})),N=Object(i.b)((function(e,t){var n;return{amount:(null===(n=e.order[t.product.id])||void 0===n?void 0:n.amount)||0}}),(function(e,t){return{setOrderAmount:function(n){return e({type:T,product:t.product,amount:n})}}}))((function(e){var t=e.amount,n=e.setOrderAmount;console.log("render OrderActions",t);var r=Object(c.useState)(),o=Object(l.a)(r,2),a=o[0],i=o[1];return 0===t&&void 0===a?Object(y.jsx)(m.a,{size:"mini",compact:!0,basic:!0,icon:"add",onClick:function(){return n(1)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(m.a,{size:"mini",compact:!0,basic:!0,icon:"plus",onClick:function(){return n(t+1)}}),Object(y.jsx)(h.a,{size:"mini",value:void 0===a?t:a,onChange:function(e){console.log("change"),i(e.target.value)},onBlur:function(){void 0!==a&&(n(parseInt(a)||0),i(void 0))}}),Object(y.jsx)(m.a,{size:"mini",compact:!0,basic:!0,icon:"minus",onClick:function(){return n(t-1)}})]})})),I=Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(s.a.HeaderCell,{children:"\u041d\u0430\u0437\u0432\u0430"}),Object(y.jsx)(s.a.HeaderCell,{children:"\u0426\u0456\u043d\u0430"}),Object(y.jsx)(s.a.HeaderCell,{children:t?"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f":"\u041d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c"})]});return Object(y.jsx)(E,{header:n,ProductRow:function(e){var n=e.product;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(s.a.Cell,{children:n.name}),Object(y.jsxs)(s.a.Cell,{singleLine:!0,children:[n.price," \u0433\u0440\u043d"]}),Object(y.jsx)(s.a.Cell,{singleLine:!0,className:"product-row-actions",children:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f"===n.count?Object(y.jsx)(u.a,{color:"yellow",children:"\u041e\u0447\u0456\u043a\u0443\u0454\u0442\u044c\u0441\u044f"}):t?Object(y.jsx)(N,{product:n}):Object(y.jsx)(u.a,{color:"green",children:"\u0412 \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456"})})]})}})}));n(119);a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(i.a,{store:D,children:Object(y.jsx)(I,{})})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.4c8cad0a.chunk.js.map