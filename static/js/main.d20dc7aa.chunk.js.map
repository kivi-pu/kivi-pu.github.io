{"version":3,"sources":["helpers.ts","models/category.ts","store.ts","firebase-config.ts","models/product.ts","components/products-page/products-search-input.tsx","hooks/use-window-size.ts","components/products-page/category-row.tsx","components/products-page/order-actions.tsx","components/products-page/product-row.tsx","components/products-page/products-table.tsx","components/products-page/menu.tsx","components/products-page/index.tsx","hooks/use-search.ts","components/sign-in-page/index.tsx","components/order-page/index.tsx","components/order-history-page/index.tsx","index.tsx"],"names":["groupBy","arr","getKey","Object","entries","reduce","result","item","key","push","Category","name","products","names","this","split","type","value","UPDATE_ORDER","RESET_ORDER","SET_DATA","initialState","order","createStore","state","action","product","amount","id","fuse","Fuse","keys","categories","p","category","sort","a","b","localeCompare","map","devToolsEnhancer","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","getXMLTagContent","xml","tagName","elems","getElementsByTagName","length","textContent","Product","price","count","ProductsSearchInput","onSearch","useState","query","setQuery","useEffect","timeout","setTimeout","clearTimeout","Input","fluid","icon","iconPosition","onChange","e","target","Button","basic","onClick","memo","useWindowSize","width","window","innerWidth","height","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","CategoryRow","style","className","Breadcrumb","sections","content","connect","props","dispatch","setOrderAmount","setValue","undefined","size","compact","onBlur","parseInt","ProductRow","isLoggedIn","Label","color","Icon","ProductsTable","items","filteredProducts","toItem","flatMap","c","present","concat","Segment","attached","itemCount","itemSize","itemKey","index","overscanCount","areEqual","MenuComponent","hasOrder","Menu","secondary","Item","signOut","as","to","fetch","response","DOMParser","text","document","parseFromString","Array","from","setData","useAuthState","user","isFirebaseLoading","isDataLoading","setIsDataLoading","filtered","setFiltered","useCallback","search","r","useSearch","runQuery","load","then","loading","values","filter","x","SignInPage","email","setEmail","password","setPassword","isLoading","setIsLoading","error","setError","handleSignIn","signInWithEmailAndPassword","message","Grid","verticalAlign","textAlign","Column","Message","Form","onSubmit","stacked","placeholder","resetOrder","history","useHistory","handleConfirmOrder","JSON","stringify","collection","add","uid","date","Date","Group","negative","positive","where","orderBy","get","docs","toDate","parse","OrderHistoryPage","records","setRecords","info","Table","unstackable","Header","Row","HeaderCell","colSpan","toString","Body","Cell","ReactDOM","render","StrictMode","store","exact","path","component","OrderPage","ProductsPage","getElementById"],"mappings":"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","file":"static/js/main.d20dc7aa.chunk.js","sourcesContent":["export function groupBy<T>(arr: T[], getKey: (item: T) => string): [string, T[]][] {\n  return Object.entries(arr.reduce((result: { [key: string]: T[] }, item) => {\n    const key = getKey(item)\n\n    result[key] = result[key] || []\n\n    result[key].push(item)\n\n    return result\n  }, {}))\n}\n","import Product from './product'\nimport ListItem from './list-item'\n\nclass Category {\n  readonly key: string\n  readonly names: string[]\n  readonly products: Product[]\n\n  constructor(name: string, products: Product[]) {\n    this.key = name\n    this.names = name.split('/')\n    this.products = products\n  }\n\n  present() {\n    return this.key !== ''\n  }\n\n  toItem(): ListItem {\n    return { type: 'category', value: this }\n  }\n}\n\nexport default Category\n","import { Action, createStore } from 'redux'\nimport { devToolsEnhancer } from 'redux-devtools-extension'\nimport Fuse from 'fuse.js'\n\nimport { groupBy } from './helpers'\nimport Order from './models/order'\nimport Product from './models/product'\nimport Category from './models/category'\n\nexport const UPDATE_ORDER = 'UPDATE_ORDER'\n\nexport interface UpdateOrderAction extends Action<typeof UPDATE_ORDER> {\n  product: Product\n  amount: number\n}\n\nexport const RESET_ORDER = 'RESET_ORDER'\n\nexport interface ResetOrderAction extends Action<typeof RESET_ORDER> {}\n\nexport const SET_DATA = 'SET_DATA'\n\nexport interface SetDataAction extends Action<typeof SET_DATA> {\n  products: Product[]\n}\n\ntype AppAction = UpdateOrderAction | ResetOrderAction | SetDataAction\n\nexport interface AppState {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\nconst initialState: AppState = {\n  order: {},\n}\n\nconst reducer = (state = initialState, action: AppAction) => {\n  switch (action.type) {\n    case UPDATE_ORDER:\n      const { product, amount } = action as UpdateOrderAction\n\n      return { ...state, order: { ...state.order, [product.id]: { product, amount } } }\n\n    case RESET_ORDER:\n      return { ...state, order: {} }\n\n    case SET_DATA:\n      const fuse = new Fuse(action.products, { keys: ['name'] })\n\n      const categories = groupBy(action.products, p => p.category)\n        .sort(([a], [b]) => a.localeCompare(b))\n        .map(([name, products]) => new Category(name, products))\n\n      return { ...state, fuse, categories }\n\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, devToolsEnhancer({}))\n","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAP3J-XdlTdcxSNxWqq-s_oFjDrKRQiZWo',\n  authDomain: 'kivi-pu.firebaseapp.com',\n  projectId: 'kivi-pu',\n  storageBucket: 'kivi-pu.appspot.com',\n  messagingSenderId: '548489968120',\n  appId: '1:548489968120:web:26993108b29017326bbe0d'\n})\n\nexport const auth = firebase.auth()\n\nexport const firestore = firebase.firestore()\n","import ListItem from './list-item'\n\nfunction getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nclass Product {\n  readonly id: string\n  readonly name: string\n  readonly price: string\n  readonly count: string\n  readonly category: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n    this.category = getXMLTagContent(xml, 'category')\n  }\n\n  toItem(): ListItem {\n    return { type: 'product', value: this }\n  }\n\n  get key() {\n    return this.id\n  }\n}\n\nexport default Product\n","import { useState, useEffect, memo } from 'react'\nimport { Input, Button } from 'semantic-ui-react'\n\ninterface ProductsSearchInputProps {\n  onSearch: (query: string) => void\n}\n\nconst ProductsSearchInput = ({ onSearch }: ProductsSearchInputProps) => {\n  const [query, setQuery] = useState<string>('')\n\n  useEffect(() => {\n    if (query === '') {\n      onSearch(query)\n    } else {\n      const timeout = setTimeout(() => onSearch(query), 500)\n\n      return () => clearTimeout(timeout)\n    }\n  }, [query])\n\n  return (\n    <Input\n      fluid\n      icon='search'\n      iconPosition='left'\n      value={query}\n      onChange={e => setQuery(e.target.value)}\n      action={<Button basic icon='delete' onClick={() => setQuery('')} />}\n    />\n  )\n}\n\nexport default memo(ProductsSearchInput)\n","import { useState, useEffect } from 'react'\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  })\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n","import { CSSProperties } from 'react'\nimport { Breadcrumb, List } from 'semantic-ui-react'\nimport Category from '../../models/category'\n\ninterface CategoryRowProps {\n  style?: CSSProperties\n  category: Category\n}\n\nconst CategoryRow = ({ style, category: { names } }: CategoryRowProps) => <>\n  <div className='list-item category' style={style}>\n    <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n  </div>\n</>\n\nexport default CategoryRow\n","import { useState } from 'react'\nimport { Button, Input } from 'semantic-ui-react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\n\nimport { AppState, UpdateOrderAction, UPDATE_ORDER } from '../../store'\nimport Product from '../../models/product'\n\ninterface OwnProps {\n  product: Product\n}\n\ninterface StateProps {\n  amount: number\n}\n\ninterface DispatchProps {\n  setOrderAmount: (amount: number) => UpdateOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, OwnProps, AppState> = (state, props) => ({\n  amount: state.order[props.product.id]?.amount || 0,\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, OwnProps> = (dispatch, props) => ({\n  setOrderAmount: amount => dispatch({ type: UPDATE_ORDER, product: props.product, amount })\n})\n\nconst OrderActions = ({ amount, setOrderAmount }: OwnProps & StateProps & DispatchProps) => {\n  const [value, setValue] = useState<string>()\n\n  if (amount === 0 && value === undefined)\n    return <Button size='mini' compact basic icon='add' onClick={() => setOrderAmount(1)} />\n\n  return <>\n    <Button size='mini' compact basic icon='plus' onClick={() => setOrderAmount(amount + 1)} />\n\n    <Input size='mini' value={value === undefined ? amount : value}\n      onChange={e => setValue(e.target.value)}\n      onBlur={() => {\n        if (value === undefined)\n          return\n\n        setOrderAmount(parseInt(value) || 0)\n\n        setValue(undefined)\n      }}\n    />\n\n    <Button size='mini' compact basic icon='minus' onClick={() => setOrderAmount(amount - 1)} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderActions)\n","import { CSSProperties } from 'react'\nimport { Label, Icon } from 'semantic-ui-react'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Product from '../../models/product'\nimport OrderActions from './order-actions'\n\ninterface ProductRowProps {\n  style?: CSSProperties\n  product: Product\n  isLoggedIn: boolean\n}\n\nconst ProductRow = ({ style, product, isLoggedIn }: ProductRowProps) => {\n  const { width } = useWindowSize()\n\n  return (\n    <div className='list-item product' style={style}>\n      <div className=\"product-row-name\">{product.name}</div>\n\n      <div>{product.price} грн</div>\n\n      <div className='product-row-actions'>\n        {\n          product.count === 'Очікується'\n            ? <Label color='yellow'>{width > 600 ? 'Очікується' : <Icon name='clock' />}</Label>\n            : isLoggedIn\n              ? <OrderActions product={product} />\n              : <Label color='green'>{width > 600 ? 'В наявності' : <Icon name='check' />}</Label>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default ProductRow\n","import { memo } from 'react'\nimport { FixedSizeList, areEqual } from 'react-window'\nimport { Segment } from 'semantic-ui-react'\nimport AutoSizer from 'react-virtualized-auto-sizer'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport ListItem from '../../models/list-item'\nimport CategoryRow from './category-row'\nimport ProductRow from './product-row'\n\ninterface ProductsTableProps {\n  isLoggedIn: boolean\n  categories?: Category[]\n  filteredProducts?: Product[]\n}\n\nconst ProductsTable = ({ isLoggedIn, categories, filteredProducts }: ProductsTableProps) => {\n  const windowSize = useWindowSize()\n\n  let items: ListItem[]\n\n  if (filteredProducts !== undefined) {\n    items = filteredProducts.map(p => p.toItem())\n  }\n  else if (categories !== undefined) {\n    items = categories.flatMap(c => {\n      const items = c.products.map(p => p.toItem())\n\n      return c.present() ? ([c.toItem()]).concat(items) : items\n    })\n  }\n  else {\n    return null\n  }\n\n  return (\n    <Segment basic attached className='products'>\n      <AutoSizer>{({ width, height }) =>\n        <FixedSizeList\n          width={width}\n          height={height - 14}\n          itemCount={items.length}\n          itemSize={\n            (isLoggedIn && windowSize.width <= 600)\n             || windowSize.width <= 340\n              ? 84\n              : windowSize.width <= 425\n                ? 71\n                : windowSize.width <= 1024 ? 52 : 35\n          }\n          itemKey={index => items[index].value.key}\n          overscanCount={5}\n          className='products-border'\n        >\n          {memo(({ index, style }) => {\n            const item = items[index]\n\n            return item.type === 'category'\n              ? <CategoryRow style={style} category={item.value} />\n              : <ProductRow style={style} isLoggedIn={isLoggedIn} product={item.value} />\n          }, areEqual)}\n        </FixedSizeList>\n      }</AutoSizer>\n    </Segment>\n  )\n}\n\nexport default ProductsTable\n","import { memo } from 'react'\nimport { Menu, Icon } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\n\nimport { auth } from '../../firebase-config'\n\ninterface MenuProps {\n  isLoggedIn: boolean\n  hasOrder: boolean\n}\n\nconst MenuComponent = ({ isLoggedIn, hasOrder } : MenuProps) => {\n  if (!isLoggedIn)\n    return null\n\n  return (\n    <Menu secondary attached>\n      <Menu.Item onClick={() => auth.signOut()}>\n        <Icon name='sign out' />\n\n        Вийти\n      </Menu.Item>\n\n      <Menu.Menu className='right'>\n        {\n          hasOrder && <Menu.Item as={(props: any) => <Link to='/order' {...props} />}>\n            <Icon name='shop' />\n\n            Перейти до замовлення\n          </Menu.Item>\n        }\n\n        <Menu.Item as={(props: any) => <Link to='/orders' {...props} />}>\n          <Icon name='history' />\n\n          Історія замовлень\n        </Menu.Item>\n      </Menu.Menu>\n    </Menu>\n  )\n}\n\nexport default memo(MenuComponent)\n","import { useEffect, useState } from 'react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Segment } from 'semantic-ui-react'\nimport Fuse from 'fuse.js'\n\nimport { AppState, SetDataAction, SET_DATA } from '../../store'\nimport { auth } from '../../firebase-config'\nimport useSearch from '../../hooks/use-search'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport Order from '../../models/order'\nimport ProductsSearchInput from './products-search-input'\nimport ProductsTable from './products-table'\nimport Menu from './menu'\n\nasync function load(): Promise<Product[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('product')).map(e => new Product(e))\n}\n\ninterface StateProps {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\ninterface DispatchProps {\n  setData: (products: Product[]) => SetDataAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => state\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  setData: products => dispatch({ type: SET_DATA, products })\n})\n\nconst ProductsPage = ({ order, fuse, categories, setData }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isDataLoading, setIsDataLoading] = useState(false)\n\n  const [filteredProducts, runQuery] = useSearch<Product>(fuse)\n\n  useEffect(() => {\n    if (!categories || !fuse) {\n      setIsDataLoading(true)\n\n      load().then(products => { setData(products); setIsDataLoading(false) })\n    }\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  if (isDataLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    <Menu isLoggedIn={!!user} hasOrder={Object.values(order).filter(x => x && x.amount > 0).length > 0} />\n\n    <Segment basic attached>\n      <ProductsSearchInput onSearch={runQuery} />\n    </Segment>\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>{user ? 'Замовлення' : 'Наявність'}</div>\n      </div>\n    </Segment>\n\n    <ProductsTable isLoggedIn={!!user} categories={categories} filteredProducts={filteredProducts} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(ProductsPage)\n","import { useState, useCallback } from 'react'\nimport Fuse from 'fuse.js'\n\ntype runQuery = (query: string) => void\n\nexport default function useSearch<T>(fuse?: Fuse<T>): [T[] | undefined, runQuery] {\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const runQuery: runQuery = query => setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n\n  return [filtered, useCallback(runQuery, [fuse])]\n}\n","import { Redirect } from 'react-router-dom'\nimport { Grid, Form, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useState } from 'react'\nimport { auth } from '../../firebase-config'\n\nconst SignInPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  if (user)\n    return <Redirect to='/' />\n\n  const handleSignIn = async () => {\n    setIsLoading(true)\n\n    try {\n      await auth.signInWithEmailAndPassword(email, password)\n\n      setError(undefined)\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Grid className='sign-in-page' verticalAlign='middle' textAlign='center'>\n      <Grid.Column>\n        {error && <Message error content={error} />}\n\n        <Form onSubmit={handleSignIn} loading={isLoading || isFirebaseLoading}>\n          <Segment stacked>\n            <Form.Input type='email' placeholder='Адрес e-mail' icon='user' iconPosition='left' value={email} onChange={e => setEmail(e.target.value)} />\n\n            <Form.Input type='password' placeholder='Пароль' icon='lock' iconPosition='left' value={password} onChange={e => setPassword(e.target.value)} />\n\n            <Form.Button icon='sign in' content='Увійти' fluid />\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  )\n}\n\nexport default SignInPage\n","import { Table, Button, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { Redirect, Link, useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { auth, firestore } from '../../firebase-config'\nimport { AppState, ResetOrderAction, RESET_ORDER } from '../../store'\nimport ProductRow from '../products-page/product-row'\nimport { OrderItem } from '../../models/order'\n\ninterface StateProps {\n  items: OrderItem[]\n}\n\ninterface DispatchProps {\n  resetOrder: () => ResetOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  items: Object.values(state.order).filter(x => x && x.amount > 0).map(x => x!),\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  resetOrder: () => dispatch({ type: RESET_ORDER })\n})\n\nconst OrderPage = ({ items, resetOrder }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  const history = useHistory()\n\n  if (!isFirebaseLoading && !user || items.length === 0)\n    return <Redirect to='/' />\n\n  const handleConfirmOrder = async () => {\n    setIsLoading(true)\n\n    try {\n      const products = items.map(({ product: { id, name }, amount }) => JSON.stringify({ id, name, amount }))\n\n      await firestore.collection('orders').add({ uid: user.uid, date: new Date(), products })\n\n      setError(undefined)\n\n      resetOrder()\n\n      history.push('/')\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  if (isLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    {error && <Segment basic attached><Message error content={error} /></Segment>}\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>Замовлення</div>\n      </div>\n\n      {items.map(({ product }) => <ProductRow key={product.id} product={product} isLoggedIn />)}\n    </Segment>\n\n    <Segment basic attached>\n      <Button.Group fluid>\n        <Button basic negative icon='arrow left' content='Назад' as={(props: any) => <Link to='/' {...props} />} />\n\n        <Button basic positive icon='shop' content='Підтвердити замовлення' onClick={handleConfirmOrder} />\n      </Button.Group>\n    </Segment>\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderPage)\n","import { useEffect, useState, Fragment } from 'react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Redirect, Link } from 'react-router-dom'\nimport { Segment, Table, Menu, Icon, Message } from 'semantic-ui-react'\n\nimport { auth, firestore } from '../../firebase-config'\n\ninterface OrderRecord {\n  date: Date\n  products: { name: string, amount: number }[]\n}\n\nasync function load(uid: string): Promise<OrderRecord[]> {\n  const response = await firestore.collection('orders').where('uid', '==', uid).orderBy('date', 'desc').get()\n\n  return response.docs.map(x => ({\n    date: x.get('date').toDate(),\n    products: x.get('products').map((p: string) => JSON.parse(p))\n  }))\n}\n\nconst OrderHistoryPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [records, setRecords] = useState<OrderRecord[]>([])\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [error, setError] = useState<string>()\n\n  useEffect(() => {\n    if (!user) return\n\n    load(user.uid).then(records => {\n      setRecords(records)\n\n      setError(undefined)\n\n      setIsLoading(false)\n    }).catch(e => {\n      setError(e.message)\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [user])\n\n  if (!isFirebaseLoading && !user)\n    return <Redirect to='/' />\n\n  return (\n    <>\n      <Menu secondary attached>\n        <Menu.Item as={(props: any) => <Link to='/' {...props} />}>\n          <Icon name='arrow left' />\n\n          Назад\n        </Menu.Item>\n      </Menu>\n\n      <Segment basic attached loading={isLoading || isFirebaseLoading}>\n        {error && <Message error content={error} />}\n\n        {records.length === 0\n          ? <Message info content='У вас ще немає замовлень' />\n          : <Table unstackable compact='very'>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Назва</Table.HeaderCell>\n\n                <Table.HeaderCell>Кількість</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            {records.map(({ date, products }, index) => <Fragment key={index}>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell colSpan={2}>{date.toString()}</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {products.map(({ name, amount }, index) => <Table.Row key={index}>\n                  <Table.Cell>{name}</Table.Cell>\n\n                  <Table.Cell>{amount}</Table.Cell>\n                </Table.Row>\n                )}\n              </Table.Body>\n            </Fragment>\n            )}\n          </Table>\n        }\n      </Segment>\n    </>\n  )\n}\n\nexport default OrderHistoryPage\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsPage from './components/products-page'\nimport SignInPage from './components/sign-in-page'\nimport OrderPage from './components/order-page'\nimport OrderHistoryPage from './components/order-history-page'\nimport store from './store'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <Route exact path='/signin' component={SignInPage} />\n\n        <Route exact path='/order' component={OrderPage} />\n\n        <Route exact path='/orders' component={OrderHistoryPage} />\n\n        <Route exact path='/' component={ProductsPage} />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}