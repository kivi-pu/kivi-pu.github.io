{"version":3,"sources":["firebase-config.ts","hooks/use-search.ts","models/product.tsx","models/category.tsx","store.ts","components/products-page/order-actions.tsx","components/products-page/product-rows.tsx","components/products-page/category-rows.tsx","components/products-page/products-table.tsx","components/products-page/index.tsx","components/sign-in-page/index.tsx","components/order-page/index.tsx","components/order-history-page/index.tsx","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","useSearch","useState","query","setQuery","filtered","setFiltered","fuse","setFuse","items","options","Fuse","undefined","search","map","r","item","getXMLTagContent","xml","tagName","elems","getElementsByTagName","length","textContent","Product","id","name","price","count","this","Category","names","products","getAttribute","split","Array","from","e","UPDATE_ORDER","RESET_ORDER","initialState","order","createStore","state","action","type","product","amount","devToolsEnhancer","connect","props","dispatch","setOrderAmount","value","setValue","Button","size","compact","basic","icon","onClick","Input","onChange","target","onBlur","parseInt","ProductRows","useAuthState","user","Table","Body","index","Row","Cell","singleLine","className","Label","color","CategoryHeader","Header","HeaderCell","colSpan","Breadcrumb","sections","key","content","CategoryRows","categories","a","fetch","response","DOMParser","text","document","parseFromString","ProductsTable","header","isFirebaseLoading","isLoading","setIsLoading","setCategories","filteredProducts","setProducts","useEffect","load","then","c","flat","keys","Segment","attached","loading","fluid","iconPosition","unstackable","Menu","secondary","Item","signOut","Icon","Object","values","filter","x","as","to","SignInPage","email","setEmail","password","setPassword","error","setError","handleSignIn","signInWithEmailAndPassword","message","Grid","verticalAlign","textAlign","Column","Message","Form","onSubmit","stacked","placeholder","resetOrder","history","useHistory","handleConfirmOrder","collection","add","uid","date","Date","doc","Promise","all","push","Group","negative","positive","where","orderBy","get","results","docs","ref","productsResponse","p","toDate","records","setRecords","info","toString","ReactDOM","render","StrictMode","store","exact","path","component","OrderPage","OrderHistoryPage","ProductsPage","getElementById"],"mappings":"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","file":"static/js/main.815d1199.chunk.js","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAP3J-XdlTdcxSNxWqq-s_oFjDrKRQiZWo',\n  authDomain: 'kivi-pu.firebaseapp.com',\n  projectId: 'kivi-pu',\n  storageBucket: 'kivi-pu.appspot.com',\n  messagingSenderId: '548489968120',\n  appId: '1:548489968120:web:26993108b29017326bbe0d'\n})\n\nexport const auth = firebase.auth()\n\nexport const firestore = firebase.firestore()\n","import { useState } from 'react'\nimport Fuse from 'fuse.js'\n\ntype setter<T> = (items: T[], options?: Fuse.IFuseOptions<T> | undefined) => void\n\ntype runQuery = (query: string) => void\n\nfunction useSearch<T>(): [T[] | undefined, setter<T>, string, runQuery] {\n  const [query, setQuery] = useState<string>('')\n\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const [fuse, setFuse] = useState<Fuse<T>>()\n\n  const setter: setter<T> = (items, options) => {\n    setFuse(new Fuse(items, options))\n\n    setFiltered(undefined)\n  }\n\n  const runQuery: runQuery = (query: string) => {\n    setQuery(query)\n\n    setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n  }\n\n  return [filtered, setter, query, runQuery]\n}\n\nexport default useSearch\n","function getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nclass Product {\n  id: string\n  name: string\n  price: string\n  count: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n  }\n}\n\nexport default Product\n","import Product from './product'\n\nclass Category {\n  names: string[] | undefined\n  products: Product[]\n\n  constructor(xml: Element) {\n    this.names = xml.getAttribute('name')?.split('/')\n    this.products = Array.from(xml.getElementsByTagName('product')).map(e => new Product(e))\n  }\n}\n\nexport default Category\n","import { Action, createStore } from 'redux'\nimport { devToolsEnhancer } from 'redux-devtools-extension'\nimport Order from './models/order'\nimport Product from './models/product'\n\nexport const UPDATE_ORDER = 'UPDATE_ORDER'\n\nexport interface UpdateOrderAction extends Action<typeof UPDATE_ORDER> {\n  product: Product\n  amount: number\n}\n\nexport const RESET_ORDER = 'RESET_ORDER'\n\nexport interface ResetOrderAction extends Action<typeof RESET_ORDER> {}\n\ntype AppAction = UpdateOrderAction | ResetOrderAction\n\nexport interface AppState {\n  order: Order\n}\n\nconst initialState: AppState = {\n  order: {},\n}\n\nconst reducer = (state = initialState, action: AppAction) => {\n  switch (action.type) {\n    case UPDATE_ORDER:\n      const { product, amount } = action as UpdateOrderAction\n\n      return { ...state, order: { ...state.order, [product.id]: { product, amount } } }\n\n    case RESET_ORDER:\n      return { ...state, order: {} }\n\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, devToolsEnhancer({}))\n","import { useState } from 'react'\nimport { Button, Input } from 'semantic-ui-react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\n\nimport { AppState, UpdateOrderAction, UPDATE_ORDER } from '../../store'\nimport Product from '../../models/product'\n\ninterface OwnProps {\n  product: Product\n}\n\ninterface StateProps {\n  amount: number\n}\n\ninterface DispatchProps {\n  setOrderAmount: (amount: number) => UpdateOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, OwnProps, AppState> = (state, props) => ({\n  amount: state.order[props.product.id]?.amount || 0,\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, OwnProps> = (dispatch, props) => ({\n  setOrderAmount: amount => dispatch({ type: UPDATE_ORDER, product: props.product, amount })\n})\n\nconst OrderActions = ({ amount, setOrderAmount }: OwnProps & StateProps & DispatchProps) => {\n  const [value, setValue] = useState<string>()\n\n  if (amount === 0 && value === undefined)\n    return <Button size='mini' compact basic icon='add' onClick={() => setOrderAmount(1)} />\n\n  return <>\n    <Button size='mini' compact basic icon='plus' onClick={() => setOrderAmount(amount + 1)} />\n\n    <Input size='mini' value={value === undefined ? amount : value}\n      onChange={e => setValue(e.target.value)}\n      onBlur={() => {\n        if (value === undefined)\n          return\n\n        setOrderAmount(parseInt(value) || 0)\n\n        setValue(undefined)\n      }}\n    />\n\n    <Button size='mini' compact basic icon='minus' onClick={() => setOrderAmount(amount - 1)} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderActions)\n","import { useAuthState } from 'react-firebase-hooks/auth'\nimport { Table, Label } from 'semantic-ui-react'\nimport { auth } from '../../firebase-config'\nimport Product from '../../models/product'\nimport OrderActions from './order-actions'\n\ninterface ProductRowsProps {\n  products: Product[]\n}\n\nconst ProductRows = ({ products }: ProductRowsProps) => {\n  const [user] = useAuthState(auth)\n\n  return (\n    <Table.Body>\n      {products.map((product, index) => (\n        <Table.Row key={index}>\n          <Table.Cell>{product.name}</Table.Cell>\n\n          <Table.Cell singleLine>{product.price} грн</Table.Cell>\n\n          <Table.Cell singleLine className='product-row-actions'>\n            {\n              product.count === 'Очікується'\n                ? <Label color='yellow'>Очікується</Label>\n                : user\n                  ? <OrderActions product={product} />\n                  : <Label color='green'>В наявності</Label>\n            }\n          </Table.Cell>\n        </Table.Row>\n      ))}\n    </Table.Body>\n  )\n}\n\n\nexport default ProductRows\n","import { Fragment } from 'react'\nimport { Breadcrumb, Table } from 'semantic-ui-react'\nimport Category from '../../models/category'\nimport ProductRows from './product-rows'\n\ninterface CategoryRowsProps {\n  categories: Category[]\n}\n\ninterface CategoryHeaderProps {\n  names: string[]\n}\n\nconst CategoryRows = ({ categories }: CategoryRowsProps) => <>\n  {categories.map(({ names, products }, index) => (\n    <Fragment key={index}>\n      {names && <CategoryHeader names={names} />}\n\n      <ProductRows products={products} />\n    </Fragment>\n  ))}\n</>\n\nconst CategoryHeader = ({ names }: CategoryHeaderProps) => <Table.Header>\n  <Table.Row>\n    <Table.HeaderCell colSpan={3}>\n      <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n    </Table.HeaderCell>\n  </Table.Row>\n</Table.Header>\n\nexport default CategoryRows\n","import { useEffect, useState } from 'react'\nimport { Segment, Table, Input, Button } from 'semantic-ui-react'\n\nimport useSearch from '../../hooks/use-search'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport CategoryRows from './category-rows'\nimport ProductRows from './product-rows'\n\nasync function load(): Promise<Category[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('category')).map(e => new Category(e))\n}\n\ninterface ProductsTableProps {\n  header: JSX.Element\n  isFirebaseLoading: boolean\n}\n\nconst ProductsTable = ({ header, isFirebaseLoading }: ProductsTableProps) => {\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [categories, setCategories] = useState<Category[]>()\n\n  const [filteredProducts, setProducts, query, setQuery] = useSearch<Product>()\n\n  useEffect(() => {\n    load().then(categories => {\n      setCategories(categories)\n\n      setProducts(categories.map(c => c.products).flat(), { keys: ['name'] })\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <Segment basic attached loading={isLoading || isFirebaseLoading}>\n      <Input fluid icon='search' iconPosition='left' value={query} onChange={e => setQuery(e.target.value)}\n        action={<Button basic icon='delete' onClick={() => setQuery('')} />} />\n\n      <Table unstackable compact='very'>\n        <Table.Header>\n          <Table.Row>\n            {header}\n          </Table.Row>\n        </Table.Header>\n\n        {\n          filteredProducts === undefined\n            ? categories && <CategoryRows categories={categories} />\n            : <ProductRows products={filteredProducts} />\n        }\n      </Table>\n    </Segment>\n  )\n}\n\nexport default ProductsTable\n\nexport const { HeaderCell, Row, Cell } = Table\n","import { Table, Menu, Icon } from 'semantic-ui-react'\nimport { connect, MapStateToProps } from 'react-redux'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Link } from 'react-router-dom'\n\nimport { auth } from '../../firebase-config'\nimport { AppState } from '../../store'\nimport Order from '../../models/order'\nimport ProductsTable from './products-table'\n\ninterface StateProps {\n  order: Order\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  order: state.order,\n})\n\nconst ProductsPage = ({ order }: StateProps) => {\n  const [user, isLoading] = useAuthState(auth)\n\n  const header = <>\n    <Table.HeaderCell>Назва</Table.HeaderCell>\n\n    <Table.HeaderCell>Ціна</Table.HeaderCell>\n\n    <Table.HeaderCell>{user ? 'Замовлення' : 'Наявність'}</Table.HeaderCell>\n  </>\n\n  return <>\n    {user && <Menu secondary attached>\n      <Menu.Item onClick={() => auth.signOut()}>\n        <Icon name='sign out' />\n\n        Вийти\n      </Menu.Item>\n\n      <Menu.Menu className='right'>\n        {\n          Object.values(order).filter(x => x && x.amount > 0).length > 0 &&\n          <Menu.Item as={(props: any) => <Link to='/order' {...props} />}>\n            <Icon name='shop' />\n\n            Перейти до замовлення\n          </Menu.Item>\n        }\n\n        <Menu.Item as={(props: any) => <Link to='/orders' {...props} />}>\n          <Icon name='history' />\n\n          Історія замовлень\n        </Menu.Item>\n      </Menu.Menu>\n    </Menu>}\n\n    <ProductsTable header={header} isFirebaseLoading={isLoading} />\n  </>\n}\n\nexport default connect(mapState)(ProductsPage)\n","import { Redirect } from 'react-router-dom'\nimport { Grid, Form, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useState } from 'react'\nimport { auth } from '../../firebase-config'\n\nconst SignInPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  if (user)\n    return <Redirect to='/' />\n\n  const handleSignIn = async () => {\n    setIsLoading(true)\n\n    try {\n      await auth.signInWithEmailAndPassword(email, password)\n\n      setError(undefined)\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Grid className='sign-in-page' verticalAlign='middle' textAlign='center'>\n      <Grid.Column>\n        {error && <Message error content={error} />}\n\n        <Form onSubmit={handleSignIn} loading={isLoading || isFirebaseLoading}>\n          <Segment stacked>\n            <Form.Input type='email' placeholder='Адрес e-mail' icon='user' iconPosition='left' value={email} onChange={e => setEmail(e.target.value)} />\n\n            <Form.Input type='password' placeholder='Пароль' icon='lock' iconPosition='left' value={password} onChange={e => setPassword(e.target.value)} />\n\n            <Form.Button icon='sign in' content='Увійти' fluid />\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  )\n}\n\nexport default SignInPage\n","import { Table, Button, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { Redirect, Link, useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { auth, firestore } from '../../firebase-config'\nimport { AppState, ResetOrderAction, RESET_ORDER } from '../../store'\nimport ProductRows from '../products-page/product-rows'\nimport { OrderItem } from '../../models/order'\n\ninterface StateProps {\n  items: OrderItem[]\n}\n\ninterface DispatchProps {\n  resetOrder: () => ResetOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  items: Object.values(state.order).filter(x => x && x.amount > 0).map(x => x!),\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  resetOrder: () => dispatch({ type: RESET_ORDER })\n})\n\nconst OrderPage = ({ items, resetOrder }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  const history = useHistory()\n\n  if (!isFirebaseLoading && !user || items.length === 0)\n    return <Redirect to='/' />\n\n  const handleConfirmOrder = async () => {\n    setIsLoading(true)\n\n    try {\n      const doc = await firestore.collection('orders').add({ uid: user.uid, date: new Date() })\n\n      await Promise.all(items.map(({ product: { id, name }, amount }) => {\n        return doc.collection('products').add({ id, name, amount })\n      }))\n\n      setError(undefined)\n\n      resetOrder()\n\n      history.push('/')\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Segment basic loading={isLoading || isFirebaseLoading}>\n      {error && <Message error content={error} />}\n\n      <Table unstackable compact='very'>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Назва</Table.HeaderCell>\n\n            <Table.HeaderCell>Ціна</Table.HeaderCell>\n\n            <Table.HeaderCell>Замовлення</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <ProductRows products={items.map(x => x.product)} />\n      </Table>\n\n      <Button.Group fluid>\n        <Button basic negative icon='arrow left' content='Назад' as={(props: any) => <Link to='/' {...props} />} />\n\n        <Button basic positive icon='shop' content='Підтвердити замовлення' onClick={handleConfirmOrder} />\n      </Button.Group>\n    </Segment>\n  )\n}\n\nexport default connect(mapState, mapDispatch)(OrderPage)\n","import { useEffect, useState, Fragment } from 'react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Redirect, Link } from 'react-router-dom'\nimport { Segment, Table, Menu, Icon, Message } from 'semantic-ui-react'\n\nimport { auth, firestore } from '../../firebase-config'\n\ninterface OrderRecord {\n  date: Date\n  products: { name: string, amount: number }[]\n}\n\nasync function load(uid: string): Promise<OrderRecord[]> {\n  const response = await firestore.collection('orders').where('uid', '==', uid).orderBy('date', 'desc').get()\n\n  const results = response.docs.map(async x => {\n    const productsResponse = await x.ref.collection('products').get()\n\n    const products = productsResponse.docs.map(p => ({ name: p.get('name'), amount: p.get('amount') }))\n\n    return { date: x.get('date').toDate(), products }\n  })\n\n  return await Promise.all(results)\n}\n\nconst ProductsTable = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [records, setRecords] = useState<OrderRecord[]>([])\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    if (!user) return\n\n    load(user.uid).then(records => {\n      setRecords(records)\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [user])\n\n  if (!isFirebaseLoading && !user)\n    return <Redirect to='/' />\n\n  return (\n    <>\n      <Menu secondary attached>\n        <Menu.Item as={(props: any) => <Link to='/' {...props} />}>\n          <Icon name='arrow left' />\n\n          Назад\n        </Menu.Item>\n      </Menu>\n\n      <Segment basic attached loading={isLoading || isFirebaseLoading}>\n        {records.length === 0\n          ? <Message info content='У вас ще немає замовлень' />\n          : <Table unstackable compact='very'>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Назва</Table.HeaderCell>\n\n                <Table.HeaderCell>Кількість</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            {records.map(({ date, products }, index) => <Fragment key={index}>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell colSpan={2}>{date.toString()}</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {products.map(({ name, amount }, index) => <Table.Row key={index}>\n                  <Table.Cell>{name}</Table.Cell>\n\n                  <Table.Cell>{amount}</Table.Cell>\n                </Table.Row>\n                )}\n              </Table.Body>\n            </Fragment>\n            )}\n          </Table>\n        }\n      </Segment>\n    </>\n  )\n}\n\nexport default ProductsTable\n\nexport const { HeaderCell, Row, Cell } = Table\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsPage from './components/products-page'\nimport SignInPage from './components/sign-in-page'\nimport OrderPage from './components/order-page'\nimport OrderHistoryPage from './components/order-history-page'\nimport store from './store'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <Route exact path='/signin' component={SignInPage} />\n\n        <Route exact path='/order' component={OrderPage} />\n\n        <Route exact path='/orders' component={OrderHistoryPage} />\n\n        <Route exact path='/' component={ProductsPage} />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}