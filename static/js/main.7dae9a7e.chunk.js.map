{"version":3,"sources":["firebase-config.ts","hooks/use-search.ts","models/category.tsx","models/product.tsx","store.ts","components/products-page/order-actions.tsx","components/products-page/product-rows.tsx","components/products-page/category-rows.tsx","components/products-page/products-table.tsx","helpers.ts","components/products-page/index.tsx","components/sign-in-page/index.tsx","components/order-page/index.tsx","components/order-history-page/index.tsx","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","useSearch","useState","query","setQuery","filtered","setFiltered","fuse","setFuse","items","options","Fuse","undefined","search","map","r","item","Category","name","products","names","this","split","length","getXMLTagContent","xml","tagName","elems","getElementsByTagName","textContent","Product","id","price","count","category","UPDATE_ORDER","RESET_ORDER","initialState","order","createStore","state","action","type","product","amount","devToolsEnhancer","connect","props","dispatch","setOrderAmount","value","setValue","Button","size","compact","basic","icon","onClick","Input","onChange","e","target","onBlur","parseInt","ProductRows","useAuthState","user","Table","Body","index","Row","Cell","singleLine","className","Label","color","CategoryHeader","Header","HeaderCell","colSpan","Breadcrumb","sections","key","content","CategoryRows","categories","present","a","fetch","response","DOMParser","text","document","parseFromString","Array","from","ProductsTable","header","isFirebaseLoading","isLoading","setIsLoading","setCategories","filteredProducts","setProducts","useEffect","load","then","arr","getKey","p","Object","entries","reduce","result","push","sort","b","localeCompare","keys","Segment","attached","loading","fluid","iconPosition","unstackable","Menu","secondary","Item","signOut","Icon","values","filter","x","as","to","SignInPage","email","setEmail","password","setPassword","error","setError","handleSignIn","signInWithEmailAndPassword","message","Grid","verticalAlign","textAlign","Column","Message","Form","onSubmit","stacked","placeholder","resetOrder","history","useHistory","handleConfirmOrder","collection","add","uid","date","Date","doc","Promise","all","Group","negative","positive","where","orderBy","get","results","docs","ref","productsResponse","toDate","OrderHistoryPage","records","setRecords","info","toString","ReactDOM","render","StrictMode","store","exact","path","component","OrderPage","ProductsPage","getElementById"],"mappings":"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","file":"static/js/main.7dae9a7e.chunk.js","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAP3J-XdlTdcxSNxWqq-s_oFjDrKRQiZWo',\n  authDomain: 'kivi-pu.firebaseapp.com',\n  projectId: 'kivi-pu',\n  storageBucket: 'kivi-pu.appspot.com',\n  messagingSenderId: '548489968120',\n  appId: '1:548489968120:web:26993108b29017326bbe0d'\n})\n\nexport const auth = firebase.auth()\n\nexport const firestore = firebase.firestore()\n","import { useState } from 'react'\nimport Fuse from 'fuse.js'\n\ntype setter<T> = (items: T[], options?: Fuse.IFuseOptions<T> | undefined) => void\n\ntype runQuery = (query: string) => void\n\nfunction useSearch<T>(): [T[] | undefined, setter<T>, string, runQuery] {\n  const [query, setQuery] = useState<string>('')\n\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const [fuse, setFuse] = useState<Fuse<T>>()\n\n  const setter: setter<T> = (items, options) => {\n    setFuse(new Fuse(items, options))\n\n    setFiltered(undefined)\n  }\n\n  const runQuery: runQuery = (query: string) => {\n    setQuery(query)\n\n    setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n  }\n\n  return [filtered, setter, query, runQuery]\n}\n\nexport default useSearch\n","import Product from './product'\n\nclass Category {\n  names: string[]\n  products: Product[]\n\n  constructor(name: string, products: Product[]) {\n    this.names = name.split('/')\n    this.products = products\n  }\n\n  present() {\n    return !(this.names.length === 1 && this.names[0] === '')\n  }\n}\n\nexport default Category\n","function getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nclass Product {\n  id: string\n  name: string\n  price: string\n  count: string\n  category: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n    this.category = getXMLTagContent(xml, 'category')\n  }\n}\n\nexport default Product\n","import { Action, createStore } from 'redux'\nimport { devToolsEnhancer } from 'redux-devtools-extension'\nimport Order from './models/order'\nimport Product from './models/product'\n\nexport const UPDATE_ORDER = 'UPDATE_ORDER'\n\nexport interface UpdateOrderAction extends Action<typeof UPDATE_ORDER> {\n  product: Product\n  amount: number\n}\n\nexport const RESET_ORDER = 'RESET_ORDER'\n\nexport interface ResetOrderAction extends Action<typeof RESET_ORDER> {}\n\ntype AppAction = UpdateOrderAction | ResetOrderAction\n\nexport interface AppState {\n  order: Order\n}\n\nconst initialState: AppState = {\n  order: {},\n}\n\nconst reducer = (state = initialState, action: AppAction) => {\n  switch (action.type) {\n    case UPDATE_ORDER:\n      const { product, amount } = action as UpdateOrderAction\n\n      return { ...state, order: { ...state.order, [product.id]: { product, amount } } }\n\n    case RESET_ORDER:\n      return { ...state, order: {} }\n\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, devToolsEnhancer({}))\n","import { useState } from 'react'\nimport { Button, Input } from 'semantic-ui-react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\n\nimport { AppState, UpdateOrderAction, UPDATE_ORDER } from '../../store'\nimport Product from '../../models/product'\n\ninterface OwnProps {\n  product: Product\n}\n\ninterface StateProps {\n  amount: number\n}\n\ninterface DispatchProps {\n  setOrderAmount: (amount: number) => UpdateOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, OwnProps, AppState> = (state, props) => ({\n  amount: state.order[props.product.id]?.amount || 0,\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, OwnProps> = (dispatch, props) => ({\n  setOrderAmount: amount => dispatch({ type: UPDATE_ORDER, product: props.product, amount })\n})\n\nconst OrderActions = ({ amount, setOrderAmount }: OwnProps & StateProps & DispatchProps) => {\n  const [value, setValue] = useState<string>()\n\n  if (amount === 0 && value === undefined)\n    return <Button size='mini' compact basic icon='add' onClick={() => setOrderAmount(1)} />\n\n  return <>\n    <Button size='mini' compact basic icon='plus' onClick={() => setOrderAmount(amount + 1)} />\n\n    <Input size='mini' value={value === undefined ? amount : value}\n      onChange={e => setValue(e.target.value)}\n      onBlur={() => {\n        if (value === undefined)\n          return\n\n        setOrderAmount(parseInt(value) || 0)\n\n        setValue(undefined)\n      }}\n    />\n\n    <Button size='mini' compact basic icon='minus' onClick={() => setOrderAmount(amount - 1)} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderActions)\n","import { useAuthState } from 'react-firebase-hooks/auth'\nimport { Table, Label } from 'semantic-ui-react'\nimport { auth } from '../../firebase-config'\nimport Product from '../../models/product'\nimport OrderActions from './order-actions'\n\ninterface ProductRowsProps {\n  products: Product[]\n}\n\nconst ProductRows = ({ products }: ProductRowsProps) => {\n  const [user] = useAuthState(auth)\n\n  return (\n    <Table.Body>\n      {products.map((product, index) => (\n        <Table.Row key={index}>\n          <Table.Cell>{product.name}</Table.Cell>\n\n          <Table.Cell singleLine>{product.price} грн</Table.Cell>\n\n          <Table.Cell singleLine className='product-row-actions'>\n            {\n              product.count === 'Очікується'\n                ? <Label color='yellow'>Очікується</Label>\n                : user\n                  ? <OrderActions product={product} />\n                  : <Label color='green'>В наявності</Label>\n            }\n          </Table.Cell>\n        </Table.Row>\n      ))}\n    </Table.Body>\n  )\n}\n\n\nexport default ProductRows\n","import { Fragment } from 'react'\nimport { Breadcrumb, Table } from 'semantic-ui-react'\nimport Category from '../../models/category'\nimport ProductRows from './product-rows'\n\ninterface CategoryRowsProps {\n  categories: Category[]\n}\n\ninterface CategoryHeaderProps {\n  names: string[]\n}\n\nconst CategoryRows = ({ categories }: CategoryRowsProps) => <>\n  {categories.map((category, index) => (\n    <Fragment key={index}>\n      {category.present() && <CategoryHeader names={category.names} />}\n\n      <ProductRows products={category.products} />\n    </Fragment>\n  ))}\n</>\n\nconst CategoryHeader = ({ names }: CategoryHeaderProps) => <Table.Header>\n  <Table.Row>\n    <Table.HeaderCell colSpan={3}>\n      <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n    </Table.HeaderCell>\n  </Table.Row>\n</Table.Header>\n\nexport default CategoryRows\n","import { useEffect, useState } from 'react'\nimport { Segment, Table, Input, Button } from 'semantic-ui-react'\n\nimport { groupBy } from '../../helpers'\nimport useSearch from '../../hooks/use-search'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport CategoryRows from './category-rows'\nimport ProductRows from './product-rows'\n\nasync function load(): Promise<Product[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('product')).map(e => new Product(e))\n}\n\ninterface ProductsTableProps {\n  header: JSX.Element\n  isFirebaseLoading: boolean\n}\n\nconst ProductsTable = ({ header, isFirebaseLoading }: ProductsTableProps) => {\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [categories, setCategories] = useState<Category[]>()\n\n  const [filteredProducts, setProducts, query, setQuery] = useSearch<Product>()\n\n  useEffect(() => {\n    load().then(products => {\n      const categories = groupBy(products, p => p.category)\n        .sort(([a], [b]) => a.localeCompare(b))\n        .map(([name, products]) => new Category(name, products))\n\n      setCategories(categories)\n\n      setProducts(products.sort((a, b) => a.name.localeCompare(b.name)), { keys: ['name'] })\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <Segment basic attached loading={isLoading || isFirebaseLoading}>\n      <Input fluid icon='search' iconPosition='left' value={query} onChange={e => setQuery(e.target.value)}\n        action={<Button basic icon='delete' onClick={() => setQuery('')} />} />\n\n      <Table unstackable compact='very'>\n        <Table.Header>\n          <Table.Row>\n            {header}\n          </Table.Row>\n        </Table.Header>\n\n        {\n          filteredProducts === undefined\n            ? categories && <CategoryRows categories={categories} />\n            : <ProductRows products={filteredProducts} />\n        }\n      </Table>\n    </Segment>\n  )\n}\n\nexport default ProductsTable\n","export function groupBy<T>(arr: T[], getKey: (item: T) => string): [string, T[]][] {\n  return Object.entries(arr.reduce((result: { [key: string]: T[] }, item) => {\n    const key = getKey(item)\n\n    result[key] = result[key] || []\n\n    result[key].push(item)\n\n    return result\n  }, {}))\n}\n","import { Table, Menu, Icon } from 'semantic-ui-react'\nimport { connect, MapStateToProps } from 'react-redux'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Link } from 'react-router-dom'\n\nimport { auth } from '../../firebase-config'\nimport { AppState } from '../../store'\nimport Order from '../../models/order'\nimport ProductsTable from './products-table'\n\ninterface StateProps {\n  order: Order\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  order: state.order,\n})\n\nconst ProductsPage = ({ order }: StateProps) => {\n  const [user, isLoading] = useAuthState(auth)\n\n  const header = <>\n    <Table.HeaderCell>Назва</Table.HeaderCell>\n\n    <Table.HeaderCell>Ціна</Table.HeaderCell>\n\n    <Table.HeaderCell>{user ? 'Замовлення' : 'Наявність'}</Table.HeaderCell>\n  </>\n\n  return <>\n    {user && <Menu secondary attached>\n      <Menu.Item onClick={() => auth.signOut()}>\n        <Icon name='sign out' />\n\n        Вийти\n      </Menu.Item>\n\n      <Menu.Menu className='right'>\n        {\n          Object.values(order).filter(x => x && x.amount > 0).length > 0 &&\n          <Menu.Item as={(props: any) => <Link to='/order' {...props} />}>\n            <Icon name='shop' />\n\n            Перейти до замовлення\n          </Menu.Item>\n        }\n\n        <Menu.Item as={(props: any) => <Link to='/orders' {...props} />}>\n          <Icon name='history' />\n\n          Історія замовлень\n        </Menu.Item>\n      </Menu.Menu>\n    </Menu>}\n\n    <ProductsTable header={header} isFirebaseLoading={isLoading} />\n  </>\n}\n\nexport default connect(mapState)(ProductsPage)\n","import { Redirect } from 'react-router-dom'\nimport { Grid, Form, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useState } from 'react'\nimport { auth } from '../../firebase-config'\n\nconst SignInPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  if (user)\n    return <Redirect to='/' />\n\n  const handleSignIn = async () => {\n    setIsLoading(true)\n\n    try {\n      await auth.signInWithEmailAndPassword(email, password)\n\n      setError(undefined)\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Grid className='sign-in-page' verticalAlign='middle' textAlign='center'>\n      <Grid.Column>\n        {error && <Message error content={error} />}\n\n        <Form onSubmit={handleSignIn} loading={isLoading || isFirebaseLoading}>\n          <Segment stacked>\n            <Form.Input type='email' placeholder='Адрес e-mail' icon='user' iconPosition='left' value={email} onChange={e => setEmail(e.target.value)} />\n\n            <Form.Input type='password' placeholder='Пароль' icon='lock' iconPosition='left' value={password} onChange={e => setPassword(e.target.value)} />\n\n            <Form.Button icon='sign in' content='Увійти' fluid />\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  )\n}\n\nexport default SignInPage\n","import { Table, Button, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { Redirect, Link, useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { auth, firestore } from '../../firebase-config'\nimport { AppState, ResetOrderAction, RESET_ORDER } from '../../store'\nimport ProductRows from '../products-page/product-rows'\nimport { OrderItem } from '../../models/order'\n\ninterface StateProps {\n  items: OrderItem[]\n}\n\ninterface DispatchProps {\n  resetOrder: () => ResetOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  items: Object.values(state.order).filter(x => x && x.amount > 0).map(x => x!),\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  resetOrder: () => dispatch({ type: RESET_ORDER })\n})\n\nconst OrderPage = ({ items, resetOrder }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  const history = useHistory()\n\n  if (!isFirebaseLoading && !user || items.length === 0)\n    return <Redirect to='/' />\n\n  const handleConfirmOrder = async () => {\n    setIsLoading(true)\n\n    try {\n      const doc = await firestore.collection('orders').add({ uid: user.uid, date: new Date() })\n\n      await Promise.all(items.map(({ product: { id, name }, amount }) => {\n        return doc.collection('products').add({ id, name, amount })\n      }))\n\n      setError(undefined)\n\n      resetOrder()\n\n      history.push('/')\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Segment basic loading={isLoading || isFirebaseLoading}>\n      {error && <Message error content={error} />}\n\n      <Table unstackable compact='very'>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Назва</Table.HeaderCell>\n\n            <Table.HeaderCell>Ціна</Table.HeaderCell>\n\n            <Table.HeaderCell>Замовлення</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <ProductRows products={items.map(x => x.product)} />\n      </Table>\n\n      <Button.Group fluid>\n        <Button basic negative icon='arrow left' content='Назад' as={(props: any) => <Link to='/' {...props} />} />\n\n        <Button basic positive icon='shop' content='Підтвердити замовлення' onClick={handleConfirmOrder} />\n      </Button.Group>\n    </Segment>\n  )\n}\n\nexport default connect(mapState, mapDispatch)(OrderPage)\n","import { useEffect, useState, Fragment } from 'react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Redirect, Link } from 'react-router-dom'\nimport { Segment, Table, Menu, Icon, Message } from 'semantic-ui-react'\n\nimport { auth, firestore } from '../../firebase-config'\n\ninterface OrderRecord {\n  date: Date\n  products: { name: string, amount: number }[]\n}\n\nasync function load(uid: string): Promise<OrderRecord[]> {\n  const response = await firestore.collection('orders').where('uid', '==', uid).orderBy('date', 'desc').get()\n\n  const results = response.docs.map(async x => {\n    const productsResponse = await x.ref.collection('products').get()\n\n    const products = productsResponse.docs.map(p => ({ name: p.get('name'), amount: p.get('amount') }))\n\n    return { date: x.get('date').toDate(), products }\n  })\n\n  return await Promise.all(results)\n}\n\nconst OrderHistoryPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [records, setRecords] = useState<OrderRecord[]>([])\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [error, setError] = useState<string>()\n\n  useEffect(() => {\n    if (!user) return\n\n    load(user.uid).then(records => {\n      setRecords(records)\n\n      setError(undefined)\n\n      setIsLoading(false)\n    }).catch(e => {\n      setError(e.message)\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [user])\n\n  if (!isFirebaseLoading && !user)\n    return <Redirect to='/' />\n\n  return (\n    <>\n      <Menu secondary attached>\n        <Menu.Item as={(props: any) => <Link to='/' {...props} />}>\n          <Icon name='arrow left' />\n\n          Назад\n        </Menu.Item>\n      </Menu>\n\n      <Segment basic attached loading={isLoading || isFirebaseLoading}>\n        {error && <Message error content={error} />}\n\n        {records.length === 0\n          ? <Message info content='У вас ще немає замовлень' />\n          : <Table unstackable compact='very'>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Назва</Table.HeaderCell>\n\n                <Table.HeaderCell>Кількість</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            {records.map(({ date, products }, index) => <Fragment key={index}>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell colSpan={2}>{date.toString()}</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {products.map(({ name, amount }, index) => <Table.Row key={index}>\n                  <Table.Cell>{name}</Table.Cell>\n\n                  <Table.Cell>{amount}</Table.Cell>\n                </Table.Row>\n                )}\n              </Table.Body>\n            </Fragment>\n            )}\n          </Table>\n        }\n      </Segment>\n    </>\n  )\n}\n\nexport default OrderHistoryPage\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsPage from './components/products-page'\nimport SignInPage from './components/sign-in-page'\nimport OrderPage from './components/order-page'\nimport OrderHistoryPage from './components/order-history-page'\nimport store from './store'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <Route exact path='/signin' component={SignInPage} />\n\n        <Route exact path='/order' component={OrderPage} />\n\n        <Route exact path='/orders' component={OrderHistoryPage} />\n\n        <Route exact path='/' component={ProductsPage} />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}