{"version":3,"sources":["helpers.ts","models/category.ts","store.ts","firebase-config.ts","models/product.ts","components/products-page/products-search-input.tsx","hooks/use-window-size.ts","components/products-page/category-row.tsx","components/products-page/order-actions.tsx","components/products-page/product-row.tsx","components/products-page/products-table.tsx","components/products-page/menu.tsx","components/products-page/index.tsx","hooks/use-search.ts","components/sign-in-page/index.tsx","components/order-page/index.tsx","components/order-history-page/index.tsx","index.tsx"],"names":["groupBy","arr","getKey","Object","entries","reduce","result","item","key","push","Category","name","products","names","this","split","type","value","UPDATE_ORDER","RESET_ORDER","SET_DATA","initialState","order","createStore","state","action","product","amount","id","fuse","Fuse","keys","categories","p","category","sort","a","b","localeCompare","map","devToolsEnhancer","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","getXMLTagContent","xml","tagName","elems","getElementsByTagName","length","textContent","Product","price","count","ProductsSearchInput","onSearch","useState","query","setQuery","useEffect","timeout","setTimeout","clearTimeout","Input","fluid","icon","iconPosition","onChange","e","target","Button","basic","onClick","memo","useWindowSize","width","document","documentElement","clientWidth","height","clientHeight","windowSize","setWindowSize","handleResize","window","addEventListener","removeEventListener","CategoryRow","style","className","Breadcrumb","sections","content","connect","props","dispatch","setOrderAmount","setValue","undefined","size","compact","onBlur","parseInt","ProductRow","isLoggedIn","Label","color","Icon","MemoisedList","windowWidth","items","itemCount","itemSize","itemKey","index","overscanCount","areEqual","ProductsTable","filteredProducts","maxHeight","setMaxHeight","useMemo","toItem","flatMap","c","present","concat","Segment","attached","MenuComponent","hasOrder","Menu","secondary","Item","signOut","as","to","fetch","response","DOMParser","text","parseFromString","Array","from","setData","useAuthState","user","isFirebaseLoading","isDataLoading","setIsDataLoading","filtered","setFiltered","useCallback","search","r","useSearch","runQuery","load","then","loading","values","filter","x","SignInPage","email","setEmail","password","setPassword","isLoading","setIsLoading","error","setError","handleSignIn","signInWithEmailAndPassword","message","Grid","verticalAlign","textAlign","Column","Message","Form","onSubmit","stacked","placeholder","resetOrder","history","useHistory","handleConfirmOrder","JSON","stringify","collection","add","uid","date","Date","Group","negative","positive","where","orderBy","get","docs","toDate","parse","OrderHistoryPage","records","setRecords","info","Table","unstackable","Header","Row","HeaderCell","colSpan","toString","Body","Cell","ReactDOM","render","StrictMode","store","exact","path","component","OrderPage","ProductsPage","getElementById"],"mappings":"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","file":"static/js/main.2c255cf1.chunk.js","sourcesContent":["export function groupBy<T>(arr: T[], getKey: (item: T) => string): [string, T[]][] {\n  return Object.entries(arr.reduce((result: { [key: string]: T[] }, item) => {\n    const key = getKey(item)\n\n    result[key] = result[key] || []\n\n    result[key].push(item)\n\n    return result\n  }, {}))\n}\n","import Product from './product'\nimport ListItem from './list-item'\n\nclass Category {\n  readonly key: string\n  readonly names: string[]\n  readonly products: Product[]\n\n  constructor(name: string, products: Product[]) {\n    this.key = name\n    this.names = name.split('/')\n    this.products = products\n  }\n\n  present() {\n    return this.key !== ''\n  }\n\n  toItem(): ListItem {\n    return { type: 'category', value: this }\n  }\n}\n\nexport default Category\n","import { Action, createStore } from 'redux'\nimport { devToolsEnhancer } from 'redux-devtools-extension'\nimport Fuse from 'fuse.js'\n\nimport { groupBy } from './helpers'\nimport Order from './models/order'\nimport Product from './models/product'\nimport Category from './models/category'\n\nexport const UPDATE_ORDER = 'UPDATE_ORDER'\n\nexport interface UpdateOrderAction extends Action<typeof UPDATE_ORDER> {\n  product: Product\n  amount: number\n}\n\nexport const RESET_ORDER = 'RESET_ORDER'\n\nexport interface ResetOrderAction extends Action<typeof RESET_ORDER> {}\n\nexport const SET_DATA = 'SET_DATA'\n\nexport interface SetDataAction extends Action<typeof SET_DATA> {\n  products: Product[]\n}\n\ntype AppAction = UpdateOrderAction | ResetOrderAction | SetDataAction\n\nexport interface AppState {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\nconst initialState: AppState = {\n  order: {},\n}\n\nconst reducer = (state = initialState, action: AppAction) => {\n  switch (action.type) {\n    case UPDATE_ORDER:\n      const { product, amount } = action as UpdateOrderAction\n\n      return { ...state, order: { ...state.order, [product.id]: { product, amount } } }\n\n    case RESET_ORDER:\n      return { ...state, order: {} }\n\n    case SET_DATA:\n      const fuse = new Fuse(action.products, { keys: ['name'] })\n\n      const categories = groupBy(action.products, p => p.category)\n        .sort(([a], [b]) => a.localeCompare(b))\n        .map(([name, products]) => new Category(name, products))\n\n      return { ...state, fuse, categories }\n\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, devToolsEnhancer({}))\n","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAP3J-XdlTdcxSNxWqq-s_oFjDrKRQiZWo',\n  authDomain: 'kivi-pu.firebaseapp.com',\n  projectId: 'kivi-pu',\n  storageBucket: 'kivi-pu.appspot.com',\n  messagingSenderId: '548489968120',\n  appId: '1:548489968120:web:26993108b29017326bbe0d'\n})\n\nexport const auth = firebase.auth()\n\nexport const firestore = firebase.firestore()\n","import ListItem from './list-item'\n\nfunction getXMLTagContent(xml: Element, tagName: string): string {\n  const elems = xml.getElementsByTagName(tagName)\n\n  return (elems.length >= 1 && elems[0].textContent) || ''\n}\n\nclass Product {\n  readonly id: string\n  readonly name: string\n  readonly price: string\n  readonly count: string\n  readonly category: string\n\n  constructor(xml: Element) {\n    this.id = getXMLTagContent(xml, 'code')\n    this.name = getXMLTagContent(xml, 'name')\n    this.price = getXMLTagContent(xml, 'price')\n    this.count = getXMLTagContent(xml, 'count')\n    this.category = getXMLTagContent(xml, 'category')\n  }\n\n  toItem(): ListItem {\n    return { type: 'product', value: this }\n  }\n\n  get key() {\n    return this.id\n  }\n}\n\nexport default Product\n","import { useState, useEffect, memo } from 'react'\nimport { Input, Button } from 'semantic-ui-react'\n\ninterface ProductsSearchInputProps {\n  onSearch: (query: string) => void\n}\n\nconst ProductsSearchInput = ({ onSearch }: ProductsSearchInputProps) => {\n  const [query, setQuery] = useState<string>('')\n\n  useEffect(() => {\n    if (query === '') {\n      onSearch(query)\n    } else {\n      const timeout = setTimeout(() => onSearch(query), 500)\n\n      return () => clearTimeout(timeout)\n    }\n  }, [query])\n\n  return (\n    <Input\n      fluid\n      icon='search'\n      iconPosition='left'\n      value={query}\n      onChange={e => setQuery(e.target.value)}\n      action={<Button basic icon='delete' onClick={() => setQuery('')} />}\n    />\n  )\n}\n\nexport default memo(ProductsSearchInput)\n","import { useState, useEffect } from 'react'\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: document.documentElement.clientWidth,\n    height: document.documentElement.clientHeight,\n  })\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight,\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n","import { CSSProperties } from 'react'\nimport { Breadcrumb, List } from 'semantic-ui-react'\nimport Category from '../../models/category'\n\ninterface CategoryRowProps {\n  style?: CSSProperties\n  category: Category\n}\n\nconst CategoryRow = ({ style, category: { names } }: CategoryRowProps) => <>\n  <div className='list-item category' style={style}>\n    <Breadcrumb icon='right angle' sections={names.map(name => ({ key: name, content: name }))} />\n  </div>\n</>\n\nexport default CategoryRow\n","import { useState } from 'react'\nimport { Button, Input } from 'semantic-ui-react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\n\nimport { AppState, UpdateOrderAction, UPDATE_ORDER } from '../../store'\nimport Product from '../../models/product'\n\ninterface OwnProps {\n  product: Product\n}\n\ninterface StateProps {\n  amount: number\n}\n\ninterface DispatchProps {\n  setOrderAmount: (amount: number) => UpdateOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, OwnProps, AppState> = (state, props) => ({\n  amount: state.order[props.product.id]?.amount || 0,\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, OwnProps> = (dispatch, props) => ({\n  setOrderAmount: amount => dispatch({ type: UPDATE_ORDER, product: props.product, amount })\n})\n\nconst OrderActions = ({ amount, setOrderAmount }: OwnProps & StateProps & DispatchProps) => {\n  const [value, setValue] = useState<string>()\n\n  if (amount === 0 && value === undefined)\n    return <Button size='mini' compact basic icon='add' onClick={() => setOrderAmount(1)} />\n\n  return <>\n    <Button size='mini' compact basic icon='plus' onClick={() => setOrderAmount(amount + 1)} />\n\n    <Input size='mini' type='number' value={value === undefined ? amount : value}\n      onChange={e => setValue(e.target.value)}\n      onBlur={() => {\n        if (value === undefined)\n          return\n\n        setOrderAmount(parseInt(value) || 0)\n\n        setValue(undefined)\n      }}\n    />\n\n    <Button size='mini' compact basic icon='minus' onClick={() => setOrderAmount(amount - 1)} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderActions)\n","import { CSSProperties } from 'react'\nimport { Label, Icon } from 'semantic-ui-react'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Product from '../../models/product'\nimport OrderActions from './order-actions'\n\ninterface ProductRowProps {\n  style?: CSSProperties\n  product: Product\n  isLoggedIn: boolean\n}\n\nconst ProductRow = ({ style, product, isLoggedIn }: ProductRowProps) => {\n  const { width } = useWindowSize()\n\n  return (\n    <div className='list-item product' style={style}>\n      <div className=\"product-row-name\">{product.name}</div>\n\n      <div>{product.price} грн</div>\n\n      <div className='product-row-actions'>\n        {\n          product.count === 'Очікується'\n            ? <Label color='yellow'>{width > 600 ? 'Очікується' : <Icon name='clock' />}</Label>\n            : isLoggedIn\n              ? <OrderActions product={product} />\n              : <Label color='green'>{width > 600 ? 'В наявності' : <Icon name='check' />}</Label>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default ProductRow\n","import { memo, useEffect, useMemo, useState } from 'react'\nimport { FixedSizeList, areEqual } from 'react-window'\nimport { Segment } from 'semantic-ui-react'\n\nimport useWindowSize from '../../hooks/use-window-size'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport ListItem from '../../models/list-item'\nimport CategoryRow from './category-row'\nimport ProductRow from './product-row'\n\ninterface ProductsTableProps {\n  isLoggedIn: boolean\n  categories?: Category[]\n  filteredProducts?: Product[]\n}\n\ninterface MemoisedListProps {\n  height: number\n  windowWidth: number\n  isLoggedIn: boolean\n  items: ListItem[]\n}\n\nconst MemoisedList = memo(({ height, windowWidth, isLoggedIn, items }: MemoisedListProps) => (\n  <FixedSizeList\n    width='100%'\n    height={height}\n    itemCount={items.length}\n    itemSize={\n      (isLoggedIn && windowWidth <= 600)\n        || windowWidth <= 340\n        ? 84\n        : windowWidth <= 425\n          ? 71\n          : windowWidth <= 1024 ? 52 : 35\n    }\n    itemKey={index => items[index].value.key}\n    overscanCount={5}\n    className='products-border'\n  >\n    {memo(({ index, style }) => {\n      const item = items[index]\n\n      return item.type === 'category'\n        ? <CategoryRow style={style} category={item.value} />\n        : <ProductRow style={style} isLoggedIn={isLoggedIn} product={item.value} />\n    }, areEqual)}\n  </FixedSizeList>\n))\n\nconst ProductsTable = ({ isLoggedIn, categories, filteredProducts }: ProductsTableProps) => {\n  const windowSize = useWindowSize()\n\n  const [maxHeight, setMaxHeight] = useState<number>(windowSize.height)\n\n  useEffect(() => { if (windowSize.height > maxHeight) setMaxHeight(windowSize.height) }, [windowSize.height])\n\n  const items = useMemo(() => {\n    if (filteredProducts !== undefined) {\n      return filteredProducts.map(p => p.toItem())\n    }\n    else if (categories !== undefined) {\n      return categories.flatMap(c => {\n        const items = c.products.map(p => p.toItem())\n\n        return c.present() ? ([c.toItem()]).concat(items) : items\n      })\n    }\n    else {\n      return []\n    }\n  }, [categories, filteredProducts])\n\n  return (\n    <Segment basic attached className='products'>\n      <MemoisedList height={maxHeight - 155 - 14} windowWidth={windowSize.width} items={items} isLoggedIn={isLoggedIn} />\n    </Segment>\n  )\n}\n\nexport default ProductsTable\n","import { memo } from 'react'\nimport { Menu, Icon } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\n\nimport { auth } from '../../firebase-config'\n\ninterface MenuProps {\n  isLoggedIn: boolean\n  hasOrder: boolean\n}\n\nconst MenuComponent = ({ isLoggedIn, hasOrder } : MenuProps) => {\n  if (!isLoggedIn)\n    return null\n\n  return (\n    <Menu secondary attached>\n      <Menu.Item onClick={() => auth.signOut()}>\n        <Icon name='sign out' />\n\n        Вийти\n      </Menu.Item>\n\n      <Menu.Menu className='right'>\n        {\n          hasOrder && <Menu.Item as={(props: any) => <Link to='/order' {...props} />}>\n            <Icon name='shop' />\n\n            Перейти до замовлення\n          </Menu.Item>\n        }\n\n        <Menu.Item as={(props: any) => <Link to='/orders' {...props} />}>\n          <Icon name='history' />\n\n          Історія замовлень\n        </Menu.Item>\n      </Menu.Menu>\n    </Menu>\n  )\n}\n\nexport default memo(MenuComponent)\n","import { useEffect, useState } from 'react'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Segment } from 'semantic-ui-react'\nimport Fuse from 'fuse.js'\n\nimport { AppState, SetDataAction, SET_DATA } from '../../store'\nimport { auth } from '../../firebase-config'\nimport useSearch from '../../hooks/use-search'\nimport Category from '../../models/category'\nimport Product from '../../models/product'\nimport Order from '../../models/order'\nimport ProductsSearchInput from './products-search-input'\nimport ProductsTable from './products-table'\nimport Menu from './menu'\n\nasync function load(): Promise<Product[]> {\n  const response = await fetch('https://raw.githubusercontent.com/kivi-pu/products/master/products.xml')\n\n  const document = new DOMParser().parseFromString(await response.text(), 'text/xml')\n\n  return Array.from(document.getElementsByTagName('product')).map(e => new Product(e))\n}\n\ninterface StateProps {\n  order: Order\n  fuse?: Fuse<Product>\n  categories?: Category[]\n}\n\ninterface DispatchProps {\n  setData: (products: Product[]) => SetDataAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => state\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  setData: products => dispatch({ type: SET_DATA, products })\n})\n\nconst ProductsPage = ({ order, fuse, categories, setData }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isDataLoading, setIsDataLoading] = useState(false)\n\n  const [filteredProducts, runQuery] = useSearch<Product>(fuse)\n\n  useEffect(() => {\n    if (!categories || !fuse) {\n      setIsDataLoading(true)\n\n      load().then(products => { setData(products); setIsDataLoading(false) })\n    }\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [])\n\n  if (isDataLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    <Menu isLoggedIn={!!user} hasOrder={Object.values(order).filter(x => x && x.amount > 0).length > 0} />\n\n    <Segment basic attached>\n      <ProductsSearchInput onSearch={runQuery} />\n    </Segment>\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>{user ? 'Замовлення' : 'Наявність'}</div>\n      </div>\n    </Segment>\n\n    <ProductsTable isLoggedIn={!!user} categories={categories} filteredProducts={filteredProducts} />\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(ProductsPage)\n","import { useState, useCallback } from 'react'\nimport Fuse from 'fuse.js'\n\ntype runQuery = (query: string) => void\n\nexport default function useSearch<T>(fuse?: Fuse<T>): [T[] | undefined, runQuery] {\n  const [filtered, setFiltered] = useState<T[]>()\n\n  const runQuery: runQuery = query => setFiltered(query === '' ? undefined : fuse?.search(query)?.map(r => r.item))\n\n  return [filtered, useCallback(runQuery, [fuse])]\n}\n","import { Redirect } from 'react-router-dom'\nimport { Grid, Form, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useState } from 'react'\nimport { auth } from '../../firebase-config'\n\nconst SignInPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [email, setEmail] = useState('')\n\n  const [password, setPassword] = useState('')\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  if (user)\n    return <Redirect to='/' />\n\n  const handleSignIn = async () => {\n    setIsLoading(true)\n\n    try {\n      await auth.signInWithEmailAndPassword(email, password)\n\n      setError(undefined)\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  return (\n    <Grid className='sign-in-page' verticalAlign='middle' textAlign='center'>\n      <Grid.Column>\n        {error && <Message error content={error} />}\n\n        <Form onSubmit={handleSignIn} loading={isLoading || isFirebaseLoading}>\n          <Segment stacked>\n            <Form.Input type='email' placeholder='Адрес e-mail' icon='user' iconPosition='left' value={email} onChange={e => setEmail(e.target.value)} />\n\n            <Form.Input type='password' placeholder='Пароль' icon='lock' iconPosition='left' value={password} onChange={e => setPassword(e.target.value)} />\n\n            <Form.Button icon='sign in' content='Увійти' fluid />\n          </Segment>\n        </Form>\n      </Grid.Column>\n    </Grid>\n  )\n}\n\nexport default SignInPage\n","import { Table, Button, Segment, Message } from 'semantic-ui-react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { connect, MapDispatchToPropsFunction, MapStateToProps } from 'react-redux'\nimport { Redirect, Link, useHistory } from 'react-router-dom'\nimport { useState } from 'react'\n\nimport { auth, firestore } from '../../firebase-config'\nimport { AppState, ResetOrderAction, RESET_ORDER } from '../../store'\nimport ProductRow from '../products-page/product-row'\nimport { OrderItem } from '../../models/order'\n\ninterface StateProps {\n  items: OrderItem[]\n}\n\ninterface DispatchProps {\n  resetOrder: () => ResetOrderAction\n}\n\nconst mapState: MapStateToProps<StateProps, object, AppState> = state => ({\n  items: Object.values(state.order).filter(x => x && x.amount > 0).map(x => x!),\n})\n\nconst mapDispatch: MapDispatchToPropsFunction<DispatchProps, object> = dispatch => ({\n  resetOrder: () => dispatch({ type: RESET_ORDER })\n})\n\nconst OrderPage = ({ items, resetOrder }: StateProps & DispatchProps) => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  const [error, setError] = useState<string>()\n\n  const history = useHistory()\n\n  if (!isFirebaseLoading && !user || items.length === 0)\n    return <Redirect to='/' />\n\n  const handleConfirmOrder = async () => {\n    setIsLoading(true)\n\n    try {\n      const products = items.map(({ product: { id, name }, amount }) => JSON.stringify({ id, name, amount }))\n\n      await firestore.collection('orders').add({ uid: user.uid, date: new Date(), products })\n\n      setError(undefined)\n\n      resetOrder()\n\n      history.push('/')\n    } catch (e) {\n      setError(e.message)\n    }\n\n    setIsLoading(false)\n  }\n\n  if (isLoading || isFirebaseLoading)\n    return <Segment basic attached loading />\n\n  return <>\n    {error && <Segment basic attached><Message error content={error} /></Segment>}\n\n    <Segment basic attached>\n      <div className='list-header'>\n        <div>Назва</div>\n\n        <div>Ціна</div>\n\n        <div>Замовлення</div>\n      </div>\n\n      {items.map(({ product }) => <ProductRow key={product.id} product={product} isLoggedIn />)}\n    </Segment>\n\n    <Segment basic attached>\n      <Button.Group fluid>\n        <Button basic negative icon='arrow left' content='Назад' as={(props: any) => <Link to='/' {...props} />} />\n\n        <Button basic positive icon='shop' content='Підтвердити замовлення' onClick={handleConfirmOrder} />\n      </Button.Group>\n    </Segment>\n  </>\n}\n\nexport default connect(mapState, mapDispatch)(OrderPage)\n","import { useEffect, useState, Fragment } from 'react'\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { Redirect, Link } from 'react-router-dom'\nimport { Segment, Table, Menu, Icon, Message } from 'semantic-ui-react'\n\nimport { auth, firestore } from '../../firebase-config'\n\ninterface OrderRecord {\n  date: Date\n  products: { name: string, amount: number }[]\n}\n\nasync function load(uid: string): Promise<OrderRecord[]> {\n  const response = await firestore.collection('orders').where('uid', '==', uid).orderBy('date', 'desc').get()\n\n  return response.docs.map(x => ({\n    date: x.get('date').toDate(),\n    products: x.get('products').map((p: string) => JSON.parse(p))\n  }))\n}\n\nconst OrderHistoryPage = () => {\n  const [user, isFirebaseLoading] = useAuthState(auth)\n\n  const [records, setRecords] = useState<OrderRecord[]>([])\n\n  const [isLoading, setIsLoading] = useState(true)\n\n  const [error, setError] = useState<string>()\n\n  useEffect(() => {\n    if (!user) return\n\n    load(user.uid).then(records => {\n      setRecords(records)\n\n      setError(undefined)\n\n      setIsLoading(false)\n    }).catch(e => {\n      setError(e.message)\n\n      setIsLoading(false)\n    })\n    // warning on setter functions missing from deps, that should be safe\n    // eslint-disable-next-line\n  }, [user])\n\n  if (!isFirebaseLoading && !user)\n    return <Redirect to='/' />\n\n  return (\n    <>\n      <Menu secondary attached>\n        <Menu.Item as={(props: any) => <Link to='/' {...props} />}>\n          <Icon name='arrow left' />\n\n          Назад\n        </Menu.Item>\n      </Menu>\n\n      <Segment basic attached loading={isLoading || isFirebaseLoading}>\n        {error && <Message error content={error} />}\n\n        {records.length === 0\n          ? <Message info content='У вас ще немає замовлень' />\n          : <Table unstackable compact='very'>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Назва</Table.HeaderCell>\n\n                <Table.HeaderCell>Кількість</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            {records.map(({ date, products }, index) => <Fragment key={index}>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell colSpan={2}>{date.toString()}</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {products.map(({ name, amount }, index) => <Table.Row key={index}>\n                  <Table.Cell>{name}</Table.Cell>\n\n                  <Table.Cell>{amount}</Table.Cell>\n                </Table.Row>\n                )}\n              </Table.Body>\n            </Fragment>\n            )}\n          </Table>\n        }\n      </Segment>\n    </>\n  )\n}\n\nexport default OrderHistoryPage\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter, Route } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport 'fomantic-ui-css/semantic.min.css'\n\nimport ProductsPage from './components/products-page'\nimport SignInPage from './components/sign-in-page'\nimport OrderPage from './components/order-page'\nimport OrderHistoryPage from './components/order-history-page'\nimport store from './store'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <Route exact path='/signin' component={SignInPage} />\n\n        <Route exact path='/order' component={OrderPage} />\n\n        <Route exact path='/orders' component={OrderHistoryPage} />\n\n        <Route exact path='/' component={ProductsPage} />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}